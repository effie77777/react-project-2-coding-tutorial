{"version":3,"file":"static/js/892.4689b5eb.chunk.js","mappings":"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","sources":["pages/Detail.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Detail = ({ currentUser, allCourses, setAllCourses, currentSearch, setCurrentSearch, setPurchase }) => {\r\n    const [ similarCourses, setSimilarCourses ] = useState([]);\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    const Navigate = useNavigate();\r\n\r\n    // 選擇課程方案\r\n    const handleSelectPlan = (e) => {\r\n        let targetId = e.target.id;\r\n        if (!targetId) {\r\n            targetId = e.target.closest(\"button\").id;\r\n        }\r\n        let amounts = targetId.substring(targetId.indexOf(\" \") + 1, targetId.indexOf(\"堂\"));\r\n        let pricePerClass = targetId.substring(targetId.indexOf(\"$\") + 1, targetId.indexOf(\" \"));\r\n        localStorage.setItem(\"purchase\", JSON.stringify([pricePerClass, amounts]));\r\n        setPurchase([pricePerClass, amounts]);\r\n        Navigate(\"/placeOrder\");\r\n    }\r\n\r\n    // 使用者點選「其他人也看了這些課程」區塊的卡片\r\n    const handleSearch = (e) => {\r\n        let targetClass;\r\n        if (e.target.id) {\r\n            targetClass = e.target;\r\n        } else {\r\n            targetClass = e.target.closest(\"button\");\r\n        }\r\n        let result = allCourses.filter((i) => i._id === targetClass.id);\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: \"smooth\",\r\n        });\r\n        const scrollToLeft = document.querySelector(\"#scroll-to-left-control\");\r\n        scrollToLeft.scrollTo({\r\n            left: 0\r\n        });\r\n    }\r\n\r\n    // 將所有課程重新排列，將每一門課程 category 和當前搜尋課程的 category 做比較。和當前搜尋的課程完全吻合的放在最前面，剩下的則依照吻合程度排列\r\n    function sortAllCourses(allCourses, currentSearch) {\r\n        let sortingResult = []; \r\n        allCourses.map((i) => {\r\n            if (currentSearch[0] && i._id !== currentSearch[0]._id) {\r\n                if (i.category === currentSearch[0].category) {\r\n                    sortingResult.unshift({ \"completelyMatch\": true, i }); //完全吻合的放在 sortingResult 的最前面\r\n                } else {\r\n                    let matchCount = 0;\r\n                    for (let j = 0; j < currentSearch[0].category.split(\"、\").length; j ++) {\r\n                        if (i.category.includes(currentSearch[0].category.split(\"、\")[j])) {\r\n                            matchCount += 1;\r\n                        }\r\n                    }\r\n                    if (matchCount > 0) {\r\n                        sortingResult.push({ matchCount, i });\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        sortingResult.sort(function(a, b) {\r\n            if (!a.completelyMatch && !b.completelyMatch) {\r\n                // 篩選出所有符合條件的課程後，只針對「category 並非完全吻合」的項目，依照其 matchCount 的數量進行排序。也就是「category 完全吻合」的項目不會納入排序，所以一開始裝進 sortingResult 的時候要用 unshift 而非 push\r\n                return b.matchCount - a.matchCount;\r\n            }\r\n        }) \r\n        sortingResult = sortingResult.map((item) => item.i); // 我們真正需要的資料只有「課程內容本身」而已，也就是 i 這個 property 對應到的 value\r\n        return sortingResult;\r\n    }    \r\n\r\n    //下面這些不寫在 useEffect(() => {}, []) 裡面，是因為即使頁面不是第一次 loading，但每當使用者點選任何一張卡片 ( 重設 currentSearch ) 的時候都要執行\r\n    useEffect(() => {\r\n        let sortingResult = sortAllCourses(allCourses, currentSearch);\r\n        setSimilarCourses(sortingResult);\r\n    }, [currentSearch]);\r\n    \r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            newCourseService.searchAllCourses()\r\n            .then((d) => {\r\n                let { newData, profile } = d.data;\r\n                for (let i = 0; i < newData.length; i ++) {\r\n                    newData[i].instructorPhoto = profile[i];\r\n                }\r\n                setAllCourses(newData);\r\n                let foundData = JSON.parse(localStorage.getItem(\"current_search\"));\r\n                if (foundData) {\r\n                    setCurrentSearch(foundData); \r\n                } else {\r\n                    setErrorMsg(\"尚未選擇想查詢的課程，將為您導向課程頁面\");\r\n                    setTimeout(() => {\r\n                        Navigate(\"/class\");\r\n                    }, 2000);\r\n                }        \r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"bg-fourth\">\r\n        \r\n            {errorMsg\r\n            ? <div className=\"container-fluid\">\r\n                <div className=\"error_msg\">{errorMsg}</div>\r\n              </div>\r\n            : <div>\r\n\r\n                {currentSearch && currentSearch.length > 0 && (\r\n                <div>\r\n                    <div className=\"container-fluid\">\r\n                        <section className=\"section\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-12 d-flex flex-wrap\">\r\n                                    <div className=\"col-12 col-md-7\">\r\n                                        <div className=\"card p-12 d-flex flex-column flex-md-row justify-content-between bg-third bg-opacity-10 rounded-24\">\r\n                                            <div className=\"w-md-35 w-lg-30 d-flex flex-column justify-content-center\">\r\n                                                <img src={currentSearch[0].instructorPhoto} alt=\"the instructor\" className=\"mb-2 profile_img\" />\r\n                                                <p className=\"detail-card-instructor-name\">{currentSearch[0].instructor.name}</p>\r\n                                            </div>\r\n                                            <div className=\"w-md-65 w-lg-70 d-flex flex-column\">\r\n                                                <h3 class=\"card-title fw-bold fs-4 text-white mb-1\">{currentSearch[0].title}</h3>\r\n                                                <p className=\"text-primary mb-3\">{currentSearch[0].category}</p>\r\n                                                <p>{currentSearch[0].description}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <h3 className=\"title mt-15 mb-3 ms-6\">講師介紹</h3>\r\n                                        <div className=\"card p-12 d-flex flex-column align-items-between bg-opacity-10 bg-third rounded-24\">\r\n                                            <div className=\"mb-sm-4 d-flex flex-wrap justify-content-between\">\r\n                                                <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-60\">\r\n                                                    <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                        school\r\n                                                    </span>\r\n                                                    <p><span className=\"text-white\">學歷</span> {currentSearch[0].instructor.education}</p>\r\n                                                </div>\r\n                                                <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-37\">\r\n                                                    <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                        translate\r\n                                                    </span>\r\n                                                    <p><span className=\"text-white\">語言</span> {currentSearch[0].instructor.language}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"d-flex flex-wrap justify-content-between\">\r\n                                                <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-60\">\r\n                                                    <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                        work\r\n                                                    </span>\r\n                                                    <p><span className=\"text-white\">經歷</span> {currentSearch[0].instructor.workingExp}</p>\r\n                                                </div>\r\n                                                <div className=\"d-flex w-100 w-sm-37\">\r\n                                                    <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                        workspace_premium\r\n                                                    </span>\r\n                                                    <p><span className=\"text-white\">等級</span> {currentSearch[0].instructor.languageLevel}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"w-100 h-1 border-bottom my-9\"></div>\r\n                                            <div>\r\n                                                <p className=\"mb-4\">{currentSearch[0].instructor.simpleBio.substring(2, currentSearch[0].instructor.simpleBio.indexOf(\"2\"))}</p>\r\n                                                <p>{currentSearch[0].instructor.simpleBio.substring(currentSearch[0].instructor.simpleBio.indexOf(\"2.\") + 2)}</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <h3 className=\"title mt-15 mb-3 ms-6\">課程簡介</h3>\r\n                                        <div className=\"card p-12 d-flex flex-column align-items-between bg-opacity-10 bg-third text-white rounded-24\">\r\n                                            <div className=\"mb-9\">\r\n                                                <h4 className=\"border-start border-primary border-3 px-2 fs-3 mb-4\">這堂課你將會學到</h4>\r\n                                                <ul>\r\n                                                    {currentSearch[0].expectToObtain.split(\" \").map((i) =>\r\n                                                    <li className=\"d-flex\">\r\n                                                        <span class=\"material-symbols-outlined detail-square\" style={{marginTop: \"0.375rem\"}}>\r\n                                                            square\r\n                                                        </span>\r\n                                                        <p>{i.substring(2)}</p>\r\n                                                    </li>\r\n                                                    )}\r\n                                                </ul>\r\n                                            </div>\r\n                                            <div>\r\n                                            <h4 className=\"border-start border-primary border-3 px-2 fs-3 mb-4\">為什麼這堂課重要？</h4>\r\n                                                <ul>\r\n                                                    {currentSearch[0].importance.split(\" \").map((i) =>\r\n                                                    <li className=\"d-flex\">\r\n                                                        <span class=\"material-symbols-outlined detail-square\" style={{marginTop: \"0.375rem\"}}>\r\n                                                            square\r\n                                                        </span>\r\n                                                        <p>{i.substring(2)}</p>\r\n                                                    </li>\r\n                                                    )}\r\n                                                </ul>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"col-12 col-md-4 offset-md-1 d-flex flex-column position-md-fixed mt-15 mt-md-0\" style={{top: \"10.75rem\", right: \"3.5%\"}}>\r\n                                        <div className=\"d-flex flex-column flex-lg-row mb-3\">\r\n                                            <h3 className=\"title ms-6\">方案選擇</h3>\r\n                                            <small className=\"ms-5 text-warning align-self-lg-end mb-lg-1\">(以下價格均為單堂費用)</small>\r\n                                        </div>\r\n                                        <ul className=\"w-100 py-8 px-6 bg-opacity-10 bg-third h-fit-content rounded-24 detail-ul\" style={{width: \"85%\"}}>\r\n                                            {currentSearch[0].plan.split((\"/\")).map((i, index) =>\r\n                                            <li className=\"detail-li\" key={index}>\r\n                                                <button type=\"button\" className=\"btn\" id={i} onClick={handleSelectPlan}>\r\n                                                    <p>{i.substring(0, i.indexOf(\" \"))}</p>\r\n                                                    <p>{i.substring(i.indexOf(\" \") + 1)}</p>\r\n                                                </button>\r\n                                            </li>\r\n                                            )}                                    \r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </section>\r\n                    </div>\r\n\r\n                    <div className=\"bg-fourth position-relative z-1\">\r\n                        <div className=\"container-fluid\">\r\n                            <section className=\"d-flex flex-column align-items-center py-15 py-md-22\">\r\n                                <h3 className=\"title text-center\">其他人也看了這些課程</h3>\r\n                                <div className=\"title-vr mb-6 mb-md-18\"></div>\r\n                                <div className=\"row w-100\">\r\n                                    <div className=\"col-12 d-flex flex-wrap flex-md-nowrap overflow-md-auto\" id=\"scroll-to-left-control\">\r\n                                        \r\n                                        {similarCourses.length > 0 && similarCourses.map((i) =>\r\n                                        <button type=\"button\" className=\"class-card btn\" id={i._id} onClick={handleSearch} key={i._id}>\r\n                                            <div className=\"class-card-header\">                                \r\n                                                <img src={i.instructorPhoto} alt=\"the instructor\" className=\"profile_img mb-2\" />\r\n                                                <p>{i.instructor.name}</p>\r\n                                            </div>\r\n                                            <div className=\"class-card-body text-start\">\r\n                                                <h3 className=\"fw-bold fs-3 text-white\">{i.title}</h3>                       \r\n                                                <div className=\"\">\r\n                                                    {i.category.split(\"、\").map((i) =>\r\n                                                    <p className=\"text-primary border border-primary d-inline-block p-1 rounded-0 me-1\" style={{fontSize: \"0.9rem\"}}>{i}</p>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"h-60 h-sm-50 h-md-60 mb-2\">{i.description}</p>\r\n                                            </div>\r\n                                            <div className=\"class-card-footer\">\r\n                                                <p className=\"align-self-end mb-1\">{i.plan.slice(i.plan.indexOf(\"分鐘\") - 2, i.plan.indexOf(\"/\"))}</p>\r\n                                                <p className=\"fs-4 text-white\">{i.plan.slice(0, i.plan.indexOf(\" \"))}</p>\r\n                                            </div>\r\n                                        </button>\r\n                                        )}\r\n\r\n                                    </div>\r\n                                </div>\r\n                            </section>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                )}\r\n\r\n            </div>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Detail;\r\n","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n// const basic_api = \"http://localhost:8080/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses() {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // 準備結帳\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    // 付款成功後\r\n    enroll(studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // 搜尋使用者所有已購買的課程\r\n    getMyOrders(studentId) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.get(\r\n            `${basic_api}/getMyOrders/${studentId}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","currentSearch","setCurrentSearch","setPurchase","_useState","useState","_useState2","_slicedToArray","similarCourses","setSimilarCourses","_useState3","_useState4","errorMsg","setErrorMsg","Navigate","useNavigate","handleSelectPlan","e","targetId","target","id","closest","amounts","substring","indexOf","pricePerClass","localStorage","setItem","JSON","stringify","handleSearch","targetClass","result","filter","i","_id","window","scrollTo","top","behavior","document","querySelector","left","useEffect","sortingResult","map","category","unshift","matchCount","j","split","length","includes","push","sort","a","b","completelyMatch","item","sortAllCourses","newCourseService","searchAllCourses","then","d","_d$data","data","newData","profile","instructorPhoto","foundData","parse","getItem","setTimeout","catch","console","log","_jsx","className","children","_jsxs","src","alt","instructor","name","class","title","description","education","language","workingExp","languageLevel","simpleBio","expectToObtain","style","marginTop","importance","right","width","plan","index","type","onClick","fontSize","slice","basic_api","courseService","_classCallCheck","_createClass","key","value","token","axios","get","concat","headers","Authorization","ItemName","TotalAmount","studentId","course","orderDetail","classAmounts","post"],"sourceRoot":""}