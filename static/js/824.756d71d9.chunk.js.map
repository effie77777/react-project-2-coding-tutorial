{"version":3,"file":"static/js/824.756d71d9.chunk.js","mappings":"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","sources":["pages/Class.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Class = ({ currentUser, allCourses, setAllCourses, filterCategory, setFilterCategory, currentSearch, setCurrentSearch }) => {\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    // const [ filterCategory, setFilterCategory ] = useState(null);\r\n    const Navigate = useNavigate();\r\n\r\n    const handleSearch = (e) => {\r\n        let result;\r\n        if (e.target.id) { //使用者點到的剛好是 button 那個標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.id);\r\n        } else { //使用者點到 button 標籤底下的任何一個子標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.closest(\"button\").id);\r\n        }\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        Navigate(\"/detail\");\r\n    }\r\n\r\n    const handleFilterCategory = (e) => {\r\n        e.stopPropagation(); //不加的話，會因為 event bubbling 而讓整張卡片都被點擊到，就會觸發 handleSearch 這個 eventListener，然後導向 detail 頁面\r\n        let result = allCourses.filter((i) => i.category.includes(e.target.outerText));\r\n        setFilterCategory(result);\r\n    }\r\n\r\n    function getCourses(limit) {\r\n        newCourseService.searchAllCourses(limit)\r\n        .then((d) => {\r\n            let { newData, profile } = d.data;\r\n            for (let i = 0; i < newData.length; i ++) {\r\n                newData[i].instructorPhoto = profile[i];\r\n            }\r\n            setAllCourses(newData); // newData 是一整個 array，裡面包含很多個 object，每一個 object 都代表一個課程\r\n            setFilterCategory(newData); //雖然使用者一開始還沒選擇課程類別，但還是先設定這個 state 的預設值，之後再依照類別篩選\r\n        })\r\n        .catch((e) => {\r\n            console.log(e);\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(allCourses);\r\n    }, [allCourses]);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            getCourses(5);\r\n            // getCourses(0);\r\n            // newCourseService.searchAllCourses(5)\r\n            // .then((d) => {\r\n            //     let { newData, profile } = d.data;\r\n            //     for (let i = 0; i < newData.length; i ++) {\r\n            //         newData[i].instructorPhoto = profile[i];\r\n            //     }\r\n            //     setAllCourses(newData); // newData 是一整個 array，裡面包含很多個 object，每一個 object 都代表一個課程\r\n            //     setFilterCategory(newData); //雖然使用者一開始還沒選擇課程類別，但還是先設定這個 state 的預設值，之後再依照類別篩選\r\n            // })\r\n            // .catch((e) => {\r\n            //     console.log(e);\r\n            // })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n\r\n            {!currentUser\r\n            ? <div className=\"error_msg\">{errorMsg}</div>\r\n            : <div>\r\n                <section className=\"section\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <ul className=\"col-10 offset-1 d-flex overflow-auto class-category\">\r\n                                <li key=\"0\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">前端語言</button></li>\r\n                                <li key=\"1\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">後端語言</button></li>\r\n                                <li key=\"2\"><button type=\"button\" onClick={handleFilterCategory}>JavaScript</button></li>\r\n                                <li key=\"3\"><button type=\"button\" onClick={handleFilterCategory}>HTML</button></li>\r\n                                <li key=\"4\"><button type=\"button\" onClick={handleFilterCategory}>CSS/SCSS</button></li>\r\n                                <li key=\"5\"><button type=\"button\" onClick={handleFilterCategory}>React</button></li>\r\n                                <li key=\"6\"><button type=\"button\" onClick={handleFilterCategory}>Vue</button></li>\r\n                                <li key=\"7\"><button type=\"button\" onClick={handleFilterCategory}>Angular</button></li>\r\n                                <li key=\"8\"><button type=\"button\" onClick={handleFilterCategory}>Node.js</button></li>\r\n                                <li key=\"9\"><button type=\"button\" onClick={handleFilterCategory}>SQL</button></li>\r\n                                <li key=\"10\"><button type=\"button\" onClick={handleFilterCategory}>Python</button></li>\r\n                                <li key=\"11\"><button type=\"button\" onClick={handleFilterCategory}>Java</button></li>\r\n                                <li key=\"12\"><button type=\"button\" onClick={handleFilterCategory}>C++</button></li>\r\n                                <li key=\"13\"><button type=\"button\" onClick={handleFilterCategory}>PHP</button></li>\r\n                                <li key=\"14\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">UI設計</button></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <section>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"col-10 offset-1 d-flex flex-wrap flex-md-nowrap overflow-md-auto\">\r\n\r\n                                {filterCategory.length > 0 && filterCategory.map((i) =>\r\n                                <button type=\"button\" className=\"class-card btn\" id={i._id} onClick={handleSearch} key={i._id}>\r\n                                    <div className=\"class-card-header\">                                \r\n                                        <img src={i.instructorPhoto} alt=\"the instructor\" className=\"profile_img mb-2\" />\r\n                                        <p>{i.instructor.name}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-body text-start\">\r\n                                        <h3 className=\"fw-bold fs-3 text-white\">{i.title}</h3>                       \r\n                                        <div className=\"\">\r\n                                            {i.category.split(\"、\").map((i) =>\r\n                                            <p type=\"button\" className=\"btn text-primary border border-primary d-inline-block p-1 rounded-0 me-1 hover-bg-primary\" style={{fontSize: \"0.9rem\"}} onClick={handleFilterCategory}>{i}</p>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"h-60 h-sm-50 h-md-60 mb-2\">{i.description}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-footer\">\r\n                                        <p className=\"align-self-end mb-1\">{i.plan.slice(i.plan.indexOf(\"堂\") + 1, i.plan.indexOf(\"/\"))}</p>\r\n                                        <p className=\"fs-4 text-white\">{i.plan.slice(0, i.plan.indexOf(\" \"))}</p>\r\n                                    </div>\r\n                                </button>\r\n                                )}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Class;","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n// const basic_api = \"http://localhost:8080/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses(limit = \"unlimited\") {\r\n        console.log(limit);\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search/${limit}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        console.log(\"ask for html from the server\");\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    enroll(studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // getMyOrders(studentId) {\r\n    //     let token;\r\n    //     localStorage.getItem(\"user_data\")\r\n    //     ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n    //     : token = \"\";\r\n    //     return axios.get(\r\n    //         `${basic_api}/getMyOrders/${studentId}`,\r\n    //         { headers: { Authorization: token } }\r\n    //     );\r\n    // }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","filterCategory","setFilterCategory","setCurrentSearch","currentSearch","_useState","useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","Navigate","useNavigate","handleSearch","e","result","target","id","filter","i","_id","closest","localStorage","setItem","JSON","stringify","handleFilterCategory","stopPropagation","category","includes","outerText","useEffect","console","log","limit","newCourseService","searchAllCourses","then","d","_d$data","data","newData","profile","length","instructorPhoto","catch","setTimeout","_jsx","className","children","_jsxs","type","onClick","map","src","alt","instructor","name","title","split","style","fontSize","description","plan","slice","indexOf","basic_api","courseService","_classCallCheck","_createClass","key","value","token","arguments","undefined","getItem","parse","axios","get","concat","headers","Authorization","ItemName","TotalAmount","studentId","course","orderDetail","classAmounts","post"],"sourceRoot":""}