"use strict";(self.webpackChunkcode_tutorial=self.webpackChunkcode_tutorial||[]).push([[183],{7183:function(e,t,a){a.r(t);var r=a(9439),s=a(2791),l=a(7689),c=a(1087),n=a(4313),o=a(184);t.default=function(e){var t=e.currentUser,a=e.currentSearch,i=e.setCurrentSearch,d=e.purchase,m=e.setPurchase,u=e.orderFromCustomer,h=e.setOrderFromCustomer,x=(0,l.s0)(),p=(0,s.useState)(null),g=(0,r.Z)(p,2),f=g[0],b=g[1];function j(){localStorage.getItem("current_search")?i(JSON.parse(localStorage.getItem("current_search"))):(b("\u60a8\u9084\u6c92\u6709\u9078\u64c7\u8981\u8cfc\u8cb7\u7684\u8ab2\u7a0b\u54e6\uff0c\u5c07\u70ba\u60a8\u5c0e\u5411\u8ab2\u7a0b\u9801\u9762"),setTimeout((function(){x("/class")}),2e3))}return localStorage.getItem("submitted_ecpay_form")&&(localStorage.removeItem("submitted_ecpay_form"),j()),(0,s.useEffect)((function(){a&&a.length>0&&function(){if(localStorage.getItem("purchase")){var e=Number(JSON.parse(localStorage.getItem("purchase"))[0]),t=Number(JSON.parse(localStorage.getItem("purchase"))[1]);m([e,t])}else b("\u60a8\u9084\u6c92\u6709\u9078\u64c7\u8cfc\u8cb7\u65b9\u6848\u54e6\uff0c\u5c07\u70ba\u60a8\u5c0e\u5411\u8ab2\u7a0b\u9801\u9762"),setTimeout((function(){x("/detail")}),2e3)}()}),[a]),(0,s.useEffect)((function(){d&&d.length>0&&(localStorage.getItem("order_from_customer")&&JSON.parse(localStorage.getItem("order_from_customer")).isValid?h([JSON.parse(localStorage.getItem("order_from_customer")).data]):(b("\u76ee\u524d\u6c92\u6709\u6709\u6548\u7684\u8a02\u55ae\u54e6\uff0c\u5c07\u70ba\u60a8\u5c0e\u56de\u4fee\u6539\u8a02\u55ae\u7684\u9801\u9762"),setTimeout((function(){x("/placeOrder")}),2e3)))}),[d]),(0,s.useEffect)((function(){t?j():(b("\u8acb\u5148\u767b\u5165\u6216\u8a3b\u518a"),setTimeout((function(){x("/login")}),2e3))}),[]),(0,o.jsx)("div",{className:"container-fluid",children:f?(0,o.jsx)("div",{className:"error_msg",children:f}):(0,o.jsxs)("div",{children:[(0,o.jsx)("section",{className:"py-11",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col-12 d-flex justify-content-center",children:(0,o.jsxs)("div",{className:"progress_bar",children:[(0,o.jsx)("div",{className:"border-top"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{children:(0,o.jsx)("small",{children:"1"})}),(0,o.jsx)("p",{children:"\u586b\u5beb\u8cfc\u8cb7\u8cc7\u6599"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"bg-linear border-0",children:(0,o.jsx)("small",{className:"text-dark",children:"2"})}),(0,o.jsx)("p",{children:"\u78ba\u8a8d\u8a02\u55ae\u8cc7\u8a0a"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"border border-1 border-third bg-fourth",children:(0,o.jsx)("small",{className:"text-third",children:"3"})}),(0,o.jsx)("p",{children:"\u6210\u529f\u8a3b\u518a\u8ab2\u7a0b"})]})]})})})}),(0,o.jsx)("section",{className:"mt-12",children:(0,o.jsx)("div",{className:"row align-items-center",children:(0,o.jsxs)("div",{className:"col-12 d-flex flex-wrap justify-content-center",children:[(0,o.jsx)("h3",{className:"fs-4 text-white fw-bold text-center w-100",children:"\u8a02\u55ae\u8cc7\u8a0a"}),u&&u.length>0&&(0,o.jsxs)("form",{className:"col-12 col-sm-10 col-md-8 d-flex flex-wrap justify-content-between text-white",children:[(0,o.jsxs)("div",{className:"w-100 w-sm-48 mt-6 bg-third bg-opacity-25 px-4 py-2",children:[(0,o.jsx)("label",{htmlFor:"name",className:"me-3",children:"\u59d3\u540d"}),(0,o.jsx)("input",{type:"text",name:"name",id:"name",value:u[0].name,className:"bg-transparent border-0 text-white px-0",disabled:!0})]}),(0,o.jsxs)("div",{className:"w-100 w-sm-48 mt-6 bg-third bg-opacity-25 px-4 py-2",children:[(0,o.jsx)("label",{htmlFor:"tel",className:"me-3",children:"\u624b\u6a5f\u865f\u78bc"}),(0,o.jsx)("input",{type:"tel",name:"tel",id:"tel",value:u[0].tel,className:"bg-transparent border-0 text-white px-0",disabled:!0})]}),(0,o.jsxs)("div",{className:"mt-6 w-100 w-sm-48 bg-third bg-opacity-25 px-4 py-2",children:[(0,o.jsx)("label",{htmlFor:"email",className:"me-3",children:"Email"}),(0,o.jsx)("input",{type:"email",name:"email",id:"email",value:u[0].email,className:"bg-transparent border-0 text-white px-0 overflow-auto w-100",disabled:!0})]}),(0,o.jsxs)("div",{className:"mt-6 w-100 w-sm-48 bg-third bg-opacity-25 px-4 py-2",children:[(0,o.jsx)("label",{htmlFor:"date",className:"me-3",children:"\u4e0a\u8ab2\u65e5\u671f"}),(0,o.jsx)("input",{type:"date",name:"date",id:"date",value:u[0].date,className:"bg-transparent border-0 text-white px-0",disabled:!0})]}),(0,o.jsxs)("div",{className:"w-100 mt-6 bg-third bg-opacity-25 px-4 py-2",children:[(0,o.jsx)("label",{htmlFor:"address",className:"me-3",children:"\u4e0a\u8ab2\u5730\u9ede"}),(0,o.jsx)("input",{type:"text",name:"address",id:"address",value:u[0].address,className:"bg-transparent border-0 text-white px-0 overflow-auto d-inline-block w-100 w-sm-fit-content",disabled:!0})]}),(0,o.jsxs)("div",{className:"w-100 mt-6 bg-third bg-opacity-25 px-4 py-2 d-flex flex-wrap",children:[(0,o.jsx)("label",{htmlFor:"address",className:"me-3",children:"\u8ab2\u7a0b\u540d\u7a31"}),(0,o.jsxs)("p",{children:[a[0].title," (",a[0].instructor.name," \u8001\u5e2b)"]})]}),(0,o.jsxs)("div",{className:"mt-9 d-flex flex-column justify-content-between w-100",children:[(0,o.jsx)("p",{className:"text-warning",children:"NT$".concat(d[0]," x ").concat(d[1],"\u5802 = NT$").concat(d[0]*d[1])}),(0,o.jsxs)("div",{className:"mt-3 d-flex flex-column flex-sm-row justify-content-sm-between",children:[(0,o.jsx)(c.rU,{className:"btn border px-12 py-2 text-white w-sm-48",to:"/placeOrder",children:"\u4fee\u6539\u8a02\u55ae"}),(0,o.jsx)("button",{type:"button",className:"btn bg-linear px-12 py-2 text-white w-sm-48 mt-3 mt-sm-0",onClick:function(){n.Z.checkOut(a[0].title,d[0]*d[1]).then((function(e){localStorage.setItem("form_from_ecpay",e.data.substring(0,e.data.indexOf("<script"))+"</form>");var t=document.getElementById("parentElement");t&&(t.innerHTML=e.data.substring(0,e.data.indexOf("<script"))+"</form>"),function(){var e=document.getElementById("_form_aiochk");e&&(localStorage.setItem("submitted_ecpay_form","true"),window.alert("\u5c07\u70ba\u60a8\u5c0e\u5411\u7da0\u754c\u91d1\u6d41\u9801\u9762\u3002\n\u672c\u5c08\u6848\u50c5\u70ba demo \u6027\u8cea\uff0c\u70ba\u65b9\u4fbf\u89c0\u770b\u6a21\u64ec\u7684\u4ea4\u6613\u7d50\u679c\uff0c\u4ed8\u6b3e\u65b9\u5f0f\u8acb\u9078\u64c7\u300c\u7db2\u8def ATM \u300d\uff0c\u9280\u884c\u5efa\u8b70\u9078\u64c7\u300c\u53f0\u7063\u571f\u5730\u9280\u884c\u300d\u6216\u300c\u53f0\u65b0\u9280\u884c\u300d\uff0c\u7121\u9808\u5b89\u88dd\u8edf\u9ad4\u5373\u53ef\u9032\u884c\u64cd\u4f5c\u3002"),e.submit())}()})).catch((function(e){console.log(e)}))},children:"\u524d\u5f80\u4ed8\u6b3e"})]})]})]})]})})}),(0,o.jsx)("section",{id:"parentElement"})]})})}},4313:function(e,t,a){var r=a(5671),s=a(3144),l=a(1243),c="https://react-project-2-coding-tutorial-backend.onrender.com/api/course",n=new(function(){function e(){(0,r.Z)(this,e)}return(0,s.Z)(e,[{key:"searchAllCourses",value:function(){var e;return e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",l.Z.get("".concat(c,"/search"),{headers:{Authorization:e}})}},{key:"checkOut",value:function(e,t){var a;return a=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",l.Z.get("".concat(c,"/payment/").concat(e,"/").concat(t),{headers:{Authorization:a}})}},{key:"enroll",value:function(e,t,a,r){var s;return s=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",l.Z.post("".concat(c,"/enroll"),{studentId:e,course:t,orderDetail:a,classAmounts:r},{headers:{Authorization:s}})}},{key:"getMyOrders",value:function(e){var t;return console.log(e),t=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",l.Z.get("".concat(c,"/getMyOrders/").concat(e),{headers:{Authorization:t}})}}]),e}());t.Z=n}}]);
//# sourceMappingURL=183.5f6e4a29.chunk.js.map