{"version":3,"file":"static/js/183.4b180e63.chunk.js","mappings":"yLA6LA,UAxLiB,SAAHA,GAA0H,IAApHC,EAAWD,EAAXC,YAAaC,EAAaF,EAAbE,cAAeC,EAAgBH,EAAhBG,iBAAkBC,EAAQJ,EAARI,SAAUC,EAAWL,EAAXK,YAAaC,EAAiBN,EAAjBM,kBAAmBC,EAAoBP,EAApBO,qBAClGC,GAAWC,EAAAA,EAAAA,MACjBC,GAAkCC,EAAAA,EAAAA,UAAS,MAAKC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAxCI,EAAQF,EAAA,GAAEG,EAAWH,EAAA,GAiG7B,OA5BAI,EAAAA,EAAAA,YAAU,WACFd,GAAiBA,EAAce,OAAS,GA1BhD,WACI,GAAIC,aAAaC,QAAQ,YAAa,CAClC,IAAIC,EAAgBC,OAAOC,KAAKC,MAAML,aAAaC,QAAQ,aAAa,IACpEK,EAAUH,OAAOC,KAAKC,MAAML,aAAaC,QAAQ,aAAa,IAClEd,EAAY,CAACe,EAAeI,GAChC,MACIT,EAAY,kIACZU,YAAW,WACPjB,EAAS,UACb,GAAG,IAEX,CAgBQkB,EAER,GAAG,CAACxB,KAEJc,EAAAA,EAAAA,YAAU,WACFZ,GAAYA,EAASa,OAAS,IAjB9BC,aAAaC,QAAQ,wBAA0BG,KAAKC,MAAML,aAAaC,QAAQ,wBAAwBQ,QACvGpB,EAAqB,CAACe,KAAKC,MAAML,aAAaC,QAAQ,wBAAwBS,QAE9Eb,EAAY,8IACZU,YAAW,WACPjB,EAAS,cACb,GAAG,MAcX,GAAG,CAACJ,KAEJY,EAAAA,EAAAA,YAAU,WACDf,EAjDDiB,aAAaC,QAAQ,kBACrBhB,EAAiBmB,KAAKC,MAAML,aAAaC,QAAQ,qBAEjDJ,EAAY,8IACZU,YAAW,WACPjB,EAAS,SACb,GAAG,OA4CHO,EAAY,8CACZU,YAAW,WACPjB,EAAS,SACb,GAAG,KAIX,GAAG,IAECU,aAAaC,QAAQ,0BACrBU,QAAQC,IAAI,mBAAmB,IAAIC,MAAOC,sBAC1Cd,aAAae,WAAW,0BAIxBC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kBAAiBC,SAE3BtB,GACCoB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SAAEtB,KAC5BuB,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,WAASC,UAAU,QAAOC,UACtBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKC,UAChBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,uCAAsCC,UACjDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,eAAcC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gBACfE,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,OAAAE,UACIF,EAAAA,EAAAA,KAAA,SAAAE,SAAO,SAEXF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,6CAEPC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qBAAoBC,UAC/BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,YAAWC,SAAC,SAEjCF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,6CAEPC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACIF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yCAAwCC,UACnDF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,aAAYC,SAAC,SAElCF,EAAAA,EAAAA,KAAA,KAAAE,SAAG,sDAOvBF,EAAAA,EAAAA,KAAA,WAASC,UAAU,QAAOC,UACtBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iDAAgDC,SAAA,EAC3DF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,4CAA2CC,SAAC,6BAEzD9B,GAAqBA,EAAkBW,OAAS,IACjDoB,EAAAA,EAAAA,MAAA,QAAMF,UAAU,gFAA+EC,SAAA,EAC3FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,OAAOH,UAAU,OAAMC,SAAC,kBACvCF,EAAAA,EAAAA,KAAA,SAAOK,KAAK,OAAOC,KAAK,OAAOC,GAAG,OAAOC,MAAOpC,EAAkB,GAAGkC,KAAML,UAAU,+EAA+EQ,UAAQ,QAEhLN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,MAAMH,UAAU,OAAMC,SAAC,8BACtCF,EAAAA,EAAAA,KAAA,SAAOK,KAAK,MAAMC,KAAK,MAAMC,GAAG,MAAMC,MAAOpC,EAAkB,GAAGsC,IAAKT,UAAU,+EAA+EQ,UAAQ,QAE5KN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,QAAQH,UAAU,OAAMC,SAAC,WACxCF,EAAAA,EAAAA,KAAA,SAAOK,KAAK,QAAQC,KAAK,QAAQC,GAAG,QAAQC,MAAOpC,EAAkB,GAAGuC,MAAOV,UAAU,+EAA+EQ,UAAQ,QAEpLN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sDAAqDC,SAAA,EAChEF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,OAAOH,UAAU,OAAMC,SAAC,8BACvCF,EAAAA,EAAAA,KAAA,SAAOK,KAAK,OAAOC,KAAK,OAAOC,GAAG,OAAOC,MAAOpC,EAAkB,GAAGwC,KAAMX,UAAU,+EAA+EQ,UAAQ,QAEhLN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8CAA6CC,SAAA,EACxDF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,UAAUH,UAAU,OAAMC,SAAC,8BAC1CF,EAAAA,EAAAA,KAAA,SAAOK,KAAK,OAAOC,KAAK,UAAUC,GAAG,UAAUC,MAAOpC,EAAkB,GAAGyC,QAASZ,UAAU,+EAA+EQ,UAAQ,QAEzLN,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+DAA8DC,SAAA,EACzEF,EAAAA,EAAAA,KAAA,SAAOI,QAAQ,UAAUH,UAAU,OAAMC,SAAC,8BAC1CC,EAAAA,EAAAA,MAAA,KAAGF,UAAU,yBAAwBC,SAAA,CAAElC,EAAc,GAAG8C,MAAM,KAAG9C,EAAc,GAAG+C,WAAWT,KAAK,wBAEtGH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wDAAuDC,SAAA,EAClEF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,eAAcC,SAAA,MAAAc,OAAQ9C,EAAS,GAAE,OAAA8C,OAAM9C,EAAS,GAAE,gBAAA8C,OAAU9C,EAAS,GAAKA,EAAS,OAChGiC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,iEAAgEC,SAAA,EAC3EF,EAAAA,EAAAA,KAACiB,EAAAA,GAAI,CAAChB,UAAU,2CAA2CiB,GAAG,cAAahB,SAAC,8BAC5EF,EAAAA,EAAAA,KAAA,UAAQK,KAAK,SAASJ,UAAU,2DAA2DkB,QAlK3G,WAChBC,EAAAA,EAAiBC,SAASrD,EAAc,GAAG8C,MAAO5C,EAAS,GAAKA,EAAS,IACxEoD,MAAK,SAACC,GAEH5B,QAAQC,IAAI2B,EAAE7B,MACdV,aAAawC,QAAQ,kBAAmBD,EAAE7B,KAAK+B,KAAKC,UAAU,EAAGH,EAAE7B,KAAK+B,KAAKE,QAAQ,YAAc,WACnG,IAAIC,EAAgBC,SAASC,eAAe,iBACxCF,IACAA,EAAcG,UAAYR,EAAE7B,KAAK+B,KAAKC,UAAU,EAAGH,EAAE7B,KAAK+B,KAAKE,QAAQ,YAAc,WAUjG,SAAoBK,GAChB,IAAIC,EAAOJ,SAASC,eAAe,gBAC/BG,IACAjD,aAAawC,QAAQ,2BAA4BQ,GACjDE,OAAOC,MAAM,ifACbF,EAAKG,SAEb,CAfQC,CAAWd,EAAE7B,KAAKsC,aACtB,IACCM,OAAM,SAACC,GACJ5C,QAAQC,IAAI2C,EAChB,GACJ,EAmJoJrC,SAAC,8CASzIF,EAAAA,EAAAA,KAAA,WAASO,GAAG,sBAK5B,C,yDC1LMiC,EAAY,0EAoEZpB,EAAmB,IAjEN,oBAAAqB,KAAAC,EAAAA,EAAAA,GAAA,KAAAD,EAAA,CA8Dd,OA9DcE,EAAAA,EAAAA,GAAAF,EAAA,EAAAG,IAAA,mBAAApC,MACf,WACI,IAAIqC,EAMJ,OAJIA,EADA7D,aAAaC,QAAQ,aACbG,KAAKC,MAAML,aAAaC,QAAQ,cAAc4D,MAE9C,GAELC,EAAAA,EAAMC,IAAI,GAAD/B,OACTwB,EAAS,WACZ,CAAEQ,QAAS,CAAEC,cAAeJ,IAEpC,GAEA,CAAAD,IAAA,WAAApC,MACA,SAAS0C,EAAUC,GACf,IAAIN,EAMJ,OAJIA,EADA7D,aAAaC,QAAQ,aACbG,KAAKC,MAAML,aAAaC,QAAQ,cAAc4D,MAE9C,GAELC,EAAAA,EAAMC,IAAI,GAAD/B,OACTwB,EAAS,aAAAxB,OAAYkC,EAAQ,KAAAlC,OAAImC,GACpC,CAAEH,QAAS,CAAEC,cAAeJ,IAEpC,GAEA,CAAAD,IAAA,SAAApC,MACA,SAAO4C,EAAWC,EAAQC,EAAaC,GACnC,IAAIV,EAIJ,OAFEA,EADF7D,aAAaC,QAAQ,aACXG,KAAKC,MAAML,aAAaC,QAAQ,cAAc4D,MAC9C,GACHC,EAAAA,EAAMU,KAAK,GAADxC,OACVwB,EAAS,WACZ,CAAEY,UAAAA,EAAWC,OAAAA,EAAQC,YAAAA,EAAaC,aAAAA,GAClC,CAAEP,QAAS,CAAEC,cAAeJ,IAEpC,GAAC,CAAAD,IAAA,cAAApC,MAED,SAAY4C,GACR,IAAIP,EAIJ,OAFEA,EADF7D,aAAaC,QAAQ,aACXG,KAAKC,MAAML,aAAaC,QAAQ,cAAc4D,MAC9C,GACHC,EAAAA,EAAMC,IAAI,GAAD/B,OACTwB,EAAS,iBAAAxB,OAAgBoC,GAC5B,CAAEJ,QAAS,CAAEC,cAAeJ,IAEpC,GAAC,CAAAD,IAAA,yBAAApC,MAED,SAAuBiD,EAAeL,EAAWC,EAAQC,EAAaC,GAClE,IAAIV,EAIJ,OAFEA,EADF7D,aAAaC,QAAQ,aACXG,KAAKC,MAAML,aAAaC,QAAQ,cAAc4D,MAC9C,GACHC,EAAAA,EAAMU,KAAK,GAADxC,OACVwB,EAAS,2BACZ,CAAEiB,cAAAA,EAAeL,UAAAA,EAAWC,OAAAA,EAAQC,YAAAA,EAAaC,aAAAA,GACjD,CAAEP,QAAS,CAAEC,cAAeJ,IAEpC,KAACJ,CAAA,CA9Dc,IAkEnB,K","sources":["pages/CheckOut.js","services/course-service.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\n\r\nconst CheckOut = ({ currentUser, currentSearch, setCurrentSearch, purchase, setPurchase, orderFromCustomer, setOrderFromCustomer }) => {\r\n    const Navigate = useNavigate();\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n\r\n    // (修正訂單編號重複的問題)\r\n    // 如果一進到頁面就向後端拿表單，這樣當使用者曾經進到綠界頁面，但沒有完成付款就按「返回上一頁」回到 CheckOut，這種情況下再次提交表單，就會發生訂單編號重複的問題。所以改成使用者按下「前往付款」按鈕的時候再去跟後端要表單\r\n    const handleGoPay = () => {\r\n        newCourseService.checkOut(currentSearch[0].title, purchase[0] * purchase[1])\r\n        .then((d) => {\r\n            // 後端傳回來的 html 即為待會要提交給綠界的訂單\r\n            console.log(d.data);\r\n            localStorage.setItem(\"form_from_ecpay\", d.data.html.substring(0, d.data.html.indexOf(\"<script\")) + \"</form>\");\r\n            let parentElement = document.getElementById(\"parentElement\");\r\n            if (parentElement) {\r\n                parentElement.innerHTML = d.data.html.substring(0, d.data.html.indexOf(\"<script\")) + \"</form>\";\r\n            }\r\n            selectForm(d.data.hashedResult);\r\n        })\r\n        .catch((e) => {\r\n            console.log(e);\r\n        })\r\n    }\r\n\r\n    // 如果在 handleGoPay() 裡面拿到表單後就直接搜尋 form，會沒辦法找到 form\r\n    function selectForm(hashedResult) {\r\n        let form = document.getElementById(\"_form_aiochk\");\r\n        if (form) {\r\n            localStorage.setItem(\"submission_hashed_result\", hashedResult);\r\n            window.alert(\"將為您導向綠界金流頁面。\\n本專案僅為 demo 性質，為方便觀看模擬的交易結果，付款方式請選擇「網路 ATM 」，銀行建議選擇「台灣土地銀行」或「台新銀行」，無須安裝軟體即可進行操作。\");\r\n            form.submit();\r\n        }\r\n    }\r\n\r\n    // 檢查 current_search (欲購買的課程) 是否存在\r\n    function checkIfCurrentSearchExists() {\r\n        if (localStorage.getItem(\"current_search\")) {\r\n            setCurrentSearch(JSON.parse(localStorage.getItem(\"current_search\")));\r\n        } else {\r\n            setErrorMsg(\"您還沒有選擇要購買的課程哦，將為您導向課程頁面\");\r\n            setTimeout(() => {\r\n                Navigate(\"/class\");\r\n            }, 2000);        \r\n        }\r\n    }\r\n\r\n    // 檢查 purchase (購買方案) 是否存在\r\n    function checkIfOrderExists() {\r\n        if (localStorage.getItem(\"purchase\")) {\r\n            let pricePerClass = Number(JSON.parse(localStorage.getItem(\"purchase\"))[0]);\r\n            let amounts = Number(JSON.parse(localStorage.getItem(\"purchase\"))[1]);\r\n            setPurchase([pricePerClass, amounts]);\r\n        } else {\r\n            setErrorMsg(\"您還沒有選擇購買方案哦，將為您導向課程頁面\");\r\n            setTimeout(() => {\r\n                Navigate(\"/detail\");\r\n            }, 2000);    \r\n        }\r\n    }\r\n\r\n    // 檢查有效訂單是否存在\r\n    function checkIfOrderIsValid() {\r\n        if (localStorage.getItem(\"order_from_customer\") && JSON.parse(localStorage.getItem(\"order_from_customer\")).isValid) {\r\n            setOrderFromCustomer([JSON.parse(localStorage.getItem(\"order_from_customer\")).data]);\r\n        } else {\r\n            setErrorMsg(\"目前沒有有效的訂單哦，將為您導回修改訂單的頁面\");\r\n            setTimeout(() => {\r\n                Navigate(\"/placeOrder\");\r\n            }, 2000);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (currentSearch && currentSearch.length > 0) {\r\n            checkIfOrderExists();\r\n        }\r\n    }, [currentSearch]);\r\n\r\n    useEffect(() => {\r\n        if (purchase && purchase.length > 0) {\r\n            checkIfOrderIsValid();\r\n        }\r\n    }, [purchase]);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            checkIfCurrentSearchExists();\r\n        }\r\n    }, []);\r\n\r\n    if (localStorage.getItem(\"submitted_ecpay_form\")) {\r\n        console.log(\"line 99. time: \", new Date().toLocaleTimeString())\r\n        localStorage.removeItem(\"submitted_ecpay_form\");\r\n    }\r\n    \r\n    return (\r\n        <div className=\"container-fluid\">\r\n            \r\n            {errorMsg\r\n            ? <div className=\"error_msg\">{errorMsg}</div>\r\n            : <div>\r\n                <section className=\"py-11\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12 d-flex justify-content-center\">\r\n                            <div className=\"progress_bar\">\r\n                                <div className=\"border-top\"></div>\r\n                                <div>\r\n                                    <div>\r\n                                        <small>1</small>\r\n                                    </div>\r\n                                    <p>填寫購買資料</p>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"bg-linear border-0\">\r\n                                        <small className=\"text-dark\">2</small>\r\n                                    </div>\r\n                                    <p>確認訂單資訊</p>\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"border border-1 border-third bg-fourth\">\r\n                                        <small className=\"text-third\">3</small>\r\n                                    </div>\r\n                                    <p>成功註冊課程</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <section className=\"mt-12\">\r\n                    <div className=\"row align-items-center\">\r\n                        <div className=\"col-12 d-flex flex-wrap justify-content-center\">\r\n                            <h3 className=\"fs-4 text-white fw-bold text-center w-100\">訂單資訊</h3>\r\n                            \r\n                            {orderFromCustomer && orderFromCustomer.length > 0 && (\r\n                            <form className=\"col-12 col-sm-10 col-md-8 d-flex flex-wrap justify-content-between text-white\">\r\n                                <div className=\"w-100 w-sm-48 mt-6 bg-third bg-opacity-25 px-4 py-2\">\r\n                                    <label htmlFor=\"name\" className=\"me-3\">姓名</label>\r\n                                    <input type=\"text\" name=\"name\" id=\"name\" value={orderFromCustomer[0].name} className=\"bg-transparent border-0 text-white px-0 w-100 w-xl-fit-content overflow-auto\" disabled />\r\n                                </div>\r\n                                <div className=\"w-100 w-sm-48 mt-6 bg-third bg-opacity-25 px-4 py-2\">\r\n                                    <label htmlFor=\"tel\" className=\"me-3\">手機號碼</label>\r\n                                    <input type=\"tel\" name=\"tel\" id=\"tel\" value={orderFromCustomer[0].tel} className=\"bg-transparent border-0 text-white px-0 w-100 w-xl-fit-content overflow-auto\" disabled />\r\n                                </div>\r\n                                <div className=\"mt-6 w-100 w-sm-48 bg-third bg-opacity-25 px-4 py-2\">\r\n                                    <label htmlFor=\"email\" className=\"me-3\">Email</label>\r\n                                    <input type=\"email\" name=\"email\" id=\"email\" value={orderFromCustomer[0].email} className=\"bg-transparent border-0 text-white px-0 w-100 w-xl-fit-content overflow-auto\" disabled />\r\n                                </div>\r\n                                <div className=\"mt-6 w-100 w-sm-48 bg-third bg-opacity-25 px-4 py-2\">\r\n                                    <label htmlFor=\"date\" className=\"me-3\">上課日期</label>\r\n                                    <input type=\"date\" name=\"date\" id=\"date\" value={orderFromCustomer[0].date} className=\"bg-transparent border-0 text-white px-0 w-100 w-xl-fit-content overflow-auto\" disabled />\r\n                                </div>\r\n                                <div className=\"w-100 mt-6 bg-third bg-opacity-25 px-4 py-2\">\r\n                                    <label htmlFor=\"address\" className=\"me-3\">上課地點</label>\r\n                                    <input type=\"text\" name=\"address\" id=\"address\" value={orderFromCustomer[0].address} className=\"bg-transparent border-0 text-white px-0 w-100 w-lg-fit-content overflow-auto\" disabled />\r\n                                </div>\r\n                                <div className=\"w-100 mt-6 bg-third bg-opacity-25 px-4 py-2 d-flex flex-wrap\">\r\n                                    <label htmlFor=\"address\" className=\"me-3\">課程名稱</label>\r\n                                    <p className=\"w-100 w-lg-fit-content\">{currentSearch[0].title} ({currentSearch[0].instructor.name} 老師)</p>\r\n                                </div>\r\n                                <div className=\"mt-9 d-flex flex-column justify-content-between w-100\">\r\n                                    <p className=\"text-warning\">{`NT$${purchase[0]} x ${purchase[1]}堂 = NT$${purchase[0] * purchase[1]}`}</p>\r\n                                    <div className=\"mt-3 d-flex flex-column flex-sm-row justify-content-sm-between\">\r\n                                        <Link className=\"btn border px-12 py-2 text-white w-sm-48\" to=\"/placeOrder\">修改訂單</Link>\r\n                                        <button type=\"button\" className=\"btn bg-linear px-12 py-2 text-white w-sm-48 mt-3 mt-sm-0\" onClick={handleGoPay}>前往付款</button>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n                            )}\r\n\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n                <section id=\"parentElement\"></section>\r\n            </div>}\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CheckOut;","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n// const basic_api = \"http://localhost:8080/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses() {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // 準備結帳\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    // 付款成功後\r\n    enroll(studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    getMyOrders(studentId) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.get(\r\n            `${basic_api}/getMyOrders/${studentId}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    checkIfPaymentFinished(hashed_result, studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/checkIfPaymentFinished`,\r\n            { hashed_result, studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","currentSearch","setCurrentSearch","purchase","setPurchase","orderFromCustomer","setOrderFromCustomer","Navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","useEffect","length","localStorage","getItem","pricePerClass","Number","JSON","parse","amounts","setTimeout","checkIfOrderExists","isValid","data","console","log","Date","toLocaleTimeString","removeItem","_jsx","className","children","_jsxs","htmlFor","type","name","id","value","disabled","tel","email","date","address","title","instructor","concat","Link","to","onClick","newCourseService","checkOut","then","d","setItem","html","substring","indexOf","parentElement","document","getElementById","innerHTML","hashedResult","form","window","alert","submit","selectForm","catch","e","basic_api","courseService","_classCallCheck","_createClass","key","token","axios","get","headers","Authorization","ItemName","TotalAmount","studentId","course","orderDetail","classAmounts","post","hashed_result"],"sourceRoot":""}