{"version":3,"file":"static/js/824.10d513af.chunk.js","mappings":"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","sources":["pages/Class.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Class = ({ currentUser, allCourses, setAllCourses, filterCategory, setFilterCategory, setCurrentSearch }) => {\r\n    const Navigate = useNavigate();\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n\r\n    // 使用者點擊「卡片本身」以搜尋特定課程\r\n    const handleSearch = (e) => {\r\n        let result;\r\n        if (e.target.id) { // 點擊到的剛好是 button 那個標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.id);\r\n        } else { // 點擊到 button 標籤底下的任何一個子標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.closest(\"button\").id);\r\n        }\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        Navigate(\"/detail\");\r\n    }\r\n\r\n    // 使用者點擊「卡片裡面的標籤」或「ul - li」以篩選課程類別\r\n    const handleFilterCategory = (e) => {\r\n        e.stopPropagation(); // 不加的話，會因為 event bubbling 而讓整張卡片都被點擊到，就會觸發 handleSearch 這個 eventListener，然後導向 detail 頁面\r\n        let result = allCourses.filter((i) => i.category.includes(e.target.outerText));\r\n        setFilterCategory(result);\r\n        let scrollControlDiv = document.querySelector(\".scroll-control-div\");\r\n        scrollControlDiv.scrollTo({\r\n            left: 0,\r\n            behavior: \"smooth\",\r\n        });\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            newCourseService.searchAllCourses()\r\n            .then((d) => {\r\n                let { newData, profile } = d.data;\r\n                for (let i = 0; i < newData.length; i ++) {\r\n                    newData[i].instructorPhoto = profile[i];\r\n                }\r\n                setAllCourses(newData); // newData 是一整個 array，裡面包含很多個 object，每一個 object 都代表一個課程\r\n                setFilterCategory(newData); // 雖然使用者一開始還沒選擇課程類別，但還是先設定這個 state 的預設值，之後再依照類別篩選\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })    \r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n\r\n            {!currentUser\r\n            ? <div className=\"error_msg\">{errorMsg}</div>\r\n            : <div>\r\n                <section className=\"section\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <ul className=\"col-10 offset-1 d-flex overflow-auto class-category\">\r\n                                <li key=\"0\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">前端語言</button></li>\r\n                                <li key=\"1\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">後端語言</button></li>\r\n                                <li key=\"2\"><button type=\"button\" onClick={handleFilterCategory}>JavaScript</button></li>\r\n                                <li key=\"3\"><button type=\"button\" onClick={handleFilterCategory}>HTML</button></li>\r\n                                <li key=\"4\"><button type=\"button\" onClick={handleFilterCategory}>CSS/SCSS</button></li>\r\n                                <li key=\"5\"><button type=\"button\" onClick={handleFilterCategory}>React</button></li>\r\n                                <li key=\"6\"><button type=\"button\" onClick={handleFilterCategory}>Vue</button></li>\r\n                                <li key=\"7\"><button type=\"button\" onClick={handleFilterCategory}>Angular</button></li>\r\n                                <li key=\"8\"><button type=\"button\" onClick={handleFilterCategory}>Node.js</button></li>\r\n                                <li key=\"9\"><button type=\"button\" onClick={handleFilterCategory}>SQL</button></li>\r\n                                <li key=\"10\"><button type=\"button\" onClick={handleFilterCategory}>Python</button></li>\r\n                                <li key=\"11\"><button type=\"button\" onClick={handleFilterCategory}>Java</button></li>\r\n                                <li key=\"12\"><button type=\"button\" onClick={handleFilterCategory}>C++</button></li>\r\n                                <li key=\"13\"><button type=\"button\" onClick={handleFilterCategory}>PHP</button></li>\r\n                                <li key=\"14\"><button type=\"button\" onClick={handleFilterCategory} className=\"word-break-keep-all\">UI設計</button></li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <section>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <div className=\"col-10 offset-1 d-flex flex-wrap flex-md-nowrap overflow-md-auto scroll-control-div\">\r\n\r\n                                {filterCategory.length > 0 && filterCategory.map((i) =>\r\n                                <button type=\"button\" className=\"class-card btn\" id={i._id} onClick={handleSearch} key={i._id}>\r\n                                    <div className=\"class-card-header\">                                \r\n                                        <img src={i.instructorPhoto} alt=\"the instructor\" className=\"profile_img mb-2\" />\r\n                                        <p>{i.instructor.name}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-body text-start\">\r\n                                        <h3 className=\"fw-bold fs-3 text-white\">{i.title}</h3>                       \r\n                                        <div className=\"\">\r\n                                            {i.category.split(\"、\").map((i) =>\r\n                                            <p type=\"button\" className=\"btn text-primary border border-primary d-inline-block p-1 rounded-0 me-1 hover-bg-primary\" style={{fontSize: \"0.9rem\"}} onClick={handleFilterCategory}>{i}</p>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"h-60 h-sm-50 h-md-60 mb-2\">{i.description}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-footer\">\r\n                                        <p className=\"align-self-end mb-1\">{i.plan.slice(i.plan.indexOf(\"堂\") + 1, i.plan.indexOf(\"/\"))}</p>\r\n                                        <p className=\"fs-4 text-white\">{i.plan.slice(0, i.plan.indexOf(\" \"))}</p>\r\n                                    </div>\r\n                                </button>\r\n                                )}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Class;","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n\r\nclass courseService {\r\n    // 搜尋所有課程\r\n    searchAllCourses() {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // 準備結帳\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    // 付款成功後\r\n    enroll(studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // 搜尋使用者所有已購買的課程\r\n    getMyOrders(studentId) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.get(\r\n            `${basic_api}/getMyOrders/${studentId}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","filterCategory","setFilterCategory","setCurrentSearch","Navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","handleSearch","e","result","target","id","filter","i","_id","closest","localStorage","setItem","JSON","stringify","handleFilterCategory","stopPropagation","category","includes","outerText","document","querySelector","scrollTo","left","behavior","useEffect","newCourseService","searchAllCourses","then","d","_d$data","data","newData","profile","length","instructorPhoto","catch","console","log","setTimeout","_jsx","className","children","_jsxs","type","onClick","map","src","alt","instructor","name","title","split","style","fontSize","description","plan","slice","indexOf","basic_api","courseService","_classCallCheck","_createClass","key","value","token","getItem","parse","axios","get","concat","headers","Authorization","ItemName","TotalAmount","studentId","course","orderDetail","classAmounts","post"],"sourceRoot":""}