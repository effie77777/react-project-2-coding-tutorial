"use strict";(self.webpackChunkcode_tutorial=self.webpackChunkcode_tutorial||[]).push([[876],{3876:function(e,r,t){t.r(r);var s=t(9439),a=t(2791),c=t(7689),o=t(4313),n=t(184);r.default=function(e){var r=e.currentUser,t=e.allCourses,l=e.setAllCourses,i=e.filterCategory,d=e.setFilterCategory,u=e.setCurrentSearch,h=(0,c.s0)(),f=(0,a.useState)(null),m=(0,s.Z)(f,2),p=m[0],g=m[1],x=(0,a.useState)([]),v=(0,s.Z)(x,2),j=v[0],N=v[1],b=function(e){var r;r=e.target.id?i.filter((function(r){return r._id===e.target.id})):i.filter((function(r){return r._id===e.target.closest("button").id})),u(r),localStorage.setItem("current_search",JSON.stringify(r));var t=r[0].category.split("\u3001"),s=[];i.map((function(e){for(var r=0;r<t.length;r++)if(e.category.includes(t[r])){console.log(t[r]),s.push(e);break}})),d(s),h("/detail")};return(0,a.useEffect)((function(){if(t.length>0){var e=[];d(t),r.data.orders.map((function(r){var s,a=t.filter((function(e){return r.courseId===e._id}));if(0===e.length)s={course:a,order:[]};else{for(var c=!1,o=0;o<e.length;o++)if(e[o].course===a){e[o].order.push(r),c=!0;break}c||(s={course:a,order:[]})}e.push(s)})),N(e)}}),[t]),(0,a.useEffect)((function(){r?o.Z.searchAllCourses().then((function(e){for(var r=e.data,t=r.newData,s=r.profile,a=0;a<t.length;a++)t[a].instructorPhoto=s[a];l(t)})).catch((function(e){console.log(e)})):(g("\u8acb\u5148\u767b\u5165\u6216\u8a3b\u518a"),setTimeout((function(){h("/login")}),2e3))}),[]),(0,n.jsx)("div",{className:"container-fluid",children:r?(0,n.jsx)("div",{children:(0,n.jsx)("section",{className:"py-11",children:(0,n.jsx)("div",{className:"row",children:(0,n.jsxs)("div",{className:"col-12",children:[(0,n.jsx)("h2",{className:"col-10 offset-1 fw-bold text-white fs-5 mb-10",children:"\u6211\u7684\u8ab2\u7a0b"}),j.length>0&&j.map((function(e){return(0,n.jsxs)("div",{className:"col-10 offset-1 d-flex flex-wrap",children:[(0,n.jsx)("div",{className:"col-12 col-md-4",children:(0,n.jsxs)("button",{type:"button",className:"class-card btn",id:e.course._id,onClick:b,children:[(0,n.jsxs)("div",{className:"class-card-header",children:[(0,n.jsx)("img",{src:e.course.instructorPhoto,alt:"the instructor",className:"profile_img mb-2"}),(0,n.jsx)("p",{children:e.course.instructor.name})]}),(0,n.jsxs)("div",{className:"class-card-body text-start",children:[(0,n.jsx)("h3",{className:"fw-bold fs-3 text-white",children:e.course.title}),(0,n.jsx)("div",{className:"",children:e.course.category.split("\u3001").map((function(e){return(0,n.jsx)("p",{className:"text-primary border border-primary d-inline-block p-1 rounded-0 me-1",style:{fontSize:"0.9rem"},children:e})}))}),(0,n.jsx)("p",{className:"h-60 h-sm-50 h-md-60 mb-2",children:e.course.description})]}),(0,n.jsxs)("div",{className:"class-card-footer",children:[(0,n.jsx)("p",{className:"align-self-end mb-1",children:e.course.plan.slice(e.course.plan.indexOf("\u5802")+1,e.course.plan.indexOf("/"))}),(0,n.jsx)("p",{className:"fs-4 text-white",children:e.course.plan.slice(0,e.course.plan.indexOf(" "))})]})]},e.course._id)}),(0,n.jsxs)("div",{className:"col-12 offset-md-1 col-md-7",children:[(0,n.jsxs)("p",{children:["\u4e0a\u8ab2\u65e5\u671f: ",e.order.date]}),(0,n.jsxs)("p",{children:["\u4e0a\u8ab2\u5730\u5740: ",e.order.address]}),(0,n.jsxs)("p",{children:["\u8ab2\u7a0b\u65b9\u6848: ",e.order.date]})]})]})}))]})})})}):(0,n.jsx)("div",{className:"error_msg",children:p})})}},4313:function(e,r,t){var s=t(5671),a=t(3144),c=t(1243),o="https://react-project-2-coding-tutorial-backend.onrender.com/api/course",n=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"searchAllCourses",value:function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return console.log(r),e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.get("".concat(o,"/search/").concat(r),{headers:{Authorization:e}})}},{key:"checkOut",value:function(e,r){var t;return t=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",console.log("ask for html from the server"),c.Z.get("".concat(o,"/payment/").concat(e,"/").concat(r),{headers:{Authorization:t}})}},{key:"enroll",value:function(e,r,t,s){var a;return a=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.post("".concat(o,"/enroll"),{studentId:e,courseId:r,orderDetail:t,orderPrice:s},{headers:{Authorization:a}})}}]),e}(),l=new n;r.Z=l}}]);
//# sourceMappingURL=876.f9adb17a.chunk.js.map