"use strict";(self.webpackChunkcode_tutorial=self.webpackChunkcode_tutorial||[]).push([[876],{3876:function(e,t,r){r.r(t);var a=r(9439),s=r(2791),n=r(7689),c=r(4313),l=r(184);t.default=function(e){var t=e.currentUser,r=e.allCourses,o=e.setAllCourses,i=e.filterCategory,d=e.setFilterCategory,u=e.setCurrentSearch,f=(0,n.s0)(),h=(0,s.useState)(null),m=(0,a.Z)(h,2),p=m[0],g=m[1],x=(0,s.useState)([]),v=(0,a.Z)(x,2),N=v[0],j=v[1],b=function(e){var t;t=e.target.id?i.filter((function(t){return t._id===e.target.id})):i.filter((function(t){return t._id===e.target.closest("button").id})),u(t),localStorage.setItem("current_search",JSON.stringify(t));var r=t[0].category.split("\u3001"),a=[];i.map((function(e){for(var t=0;t<r.length;t++)if(e.category.includes(r[t])){console.log(r[t]),a.push(e);break}})),d(a),f("/detail")};return(0,s.useEffect)((function(){r.length>0&&(j(r.filter((function(e){return e.students.includes(t.data._id)}))),d(r))}),[r]),(0,s.useEffect)((function(){t?c.Z.searchAllCourses().then((function(e){for(var t=e.data,r=t.newData,a=t.profile,s=0;s<r.length;s++)r[s].instructorPhoto=a[s];o(r)})).catch((function(e){console.log(e)})):(g("\u8acb\u5148\u767b\u5165\u6216\u8a3b\u518a"),setTimeout((function(){f("/login")}),2e3))}),[]),(0,l.jsx)("div",{className:"container-fluid",children:t?(0,l.jsx)("div",{children:(0,l.jsx)("section",{className:"py-11",children:(0,l.jsx)("div",{className:"row",children:(0,l.jsxs)("div",{className:"col-12",children:[(0,l.jsx)("h2",{className:"col-10 offset-1 fw-bold text-white fs-5 mb-10",children:"\u6211\u7684\u8ab2\u7a0b"}),(0,l.jsx)("div",{className:"col-10 offset-1 d-flex flex-wrap flex-md-nowrap overflow-md-auto",children:N.length>0&&N.map((function(e){return(0,l.jsxs)("button",{type:"button",className:"class-card btn",id:e._id,onClick:b,children:[(0,l.jsxs)("div",{className:"class-card-header",children:[(0,l.jsx)("img",{src:e.instructorPhoto,alt:"the instructor",className:"profile_img mb-2"}),(0,l.jsx)("p",{children:e.instructor.name})]}),(0,l.jsxs)("div",{className:"class-card-body text-start",children:[(0,l.jsx)("h3",{className:"fw-bold fs-3 text-white",children:e.title}),(0,l.jsx)("div",{className:"",children:e.category.split("\u3001").map((function(e){return(0,l.jsx)("p",{className:"text-primary border border-primary d-inline-block p-1 rounded-0 me-1",style:{fontSize:"0.9rem"},children:e})}))}),(0,l.jsx)("p",{className:"h-60 h-sm-50 h-md-60 mb-2",children:e.description})]}),(0,l.jsxs)("div",{className:"class-card-footer",children:[(0,l.jsx)("p",{className:"align-self-end mb-1",children:e.plan.slice(e.plan.indexOf("\u5802")+1,e.plan.indexOf("/"))}),(0,l.jsx)("p",{className:"fs-4 text-white",children:e.plan.slice(0,e.plan.indexOf(" "))})]})]},e._id)}))})]})})})}):(0,l.jsx)("div",{className:"error_msg",children:p})})}},4313:function(e,t,r){var a=r(5671),s=r(3144),n=r(1243),c="https://react-project-2-coding-tutorial-backend.onrender.com/api/course",l=new(function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,[{key:"searchAllCourses",value:function(){var e;return e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",n.Z.get("".concat(c,"/search"),{headers:{Authorization:e}})}},{key:"checkOut",value:function(e,t){var r;return r=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",n.Z.get("".concat(c,"/payment/").concat(e,"/").concat(t),{headers:{Authorization:r}})}},{key:"enroll",value:function(e,t){var r;return r=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",n.Z.post("".concat(c,"/enroll"),{studentId:e,courseId:t},{headers:{Authorization:r}})}}]),e}());t.Z=l}}]);
//# sourceMappingURL=876.6d04e3de.chunk.js.map