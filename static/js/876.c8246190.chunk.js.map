{"version":3,"file":"static/js/876.c8246190.chunk.js","mappings":"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","sources":["pages/Profile.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Profile = ({ currentUser, allCourses, setAllCourses, filterCategory, setFilterCategory, setCurrentSearch }) => {\r\n    const Navigate = useNavigate();\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    const [ myCourses, setMyCourses ] = useState([]);\r\n\r\n    const handleSearch = (e) => {\r\n        let result;\r\n        if (e.target.id) { //使用者點到的剛好是 button 那個標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.id);\r\n        } else { //使用者點到 button 標籤底下的任何一個子標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.closest(\"button\").id);\r\n        }\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        let targetCategories = result[0].category.split(\"、\");\r\n        let newArr = [];\r\n        filterCategory.map((i) => {\r\n            for (let j = 0; j < targetCategories.length; j ++) {\r\n                if (i.category.includes(targetCategories[j])) {\r\n                    console.log(targetCategories[j]);\r\n                    newArr.push(i);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        setFilterCategory(newArr);\r\n        Navigate(\"/detail\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (allCourses.length > 0) {\r\n            setFilterCategory(allCourses);\r\n            setMyCourses(currentUser.data.orders);\r\n        }\r\n    }, [allCourses]);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            newCourseService.searchAllCourses()\r\n            .then((d) => {\r\n                let { newData, profile } = d.data;\r\n                for (let i = 0; i < newData.length; i ++) {\r\n                    newData[i].instructorPhoto = profile[i];\r\n                }\r\n                setAllCourses(newData); // newData 是一整個 array，裡面包含很多個 object，每一個 object 都代表一個課程\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n\r\n            {!currentUser\r\n            ? <div className=\"error_msg\">{errorMsg}</div>\r\n            : <div>\r\n                <section className=\"py-11\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <h2 className=\"col-10 offset-1 fw-bold text-white fs-5 mb-10\">我的課程</h2>\r\n                            <div className=\"col-10 offset-1 d-flex flex-wrap flex-md-nowrap overflow-md-auto\">\r\n                            \r\n                                {myCourses.length > 0 && myCourses.map((i) =>                            \r\n                                <div className=\"class-card\" key={i.courseId}>\r\n                                    <div className=\"class-card-header\">                                \r\n                                        <p>{i.courseTitle} ({i.instructor})</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-body text-start\">\r\n                                        <p>上課日期: {i.date}</p>                       \r\n                                        <p>上課地點: {i.address}</p>                       \r\n                                        <p>課程堂數: 共 {i.plan[1]} 堂</p>                       \r\n                                    </div>\r\n                                    <button type=\"button\" className=\"class-card-footer btn text-start\" id={i.courseId} onClick={handleSearch}>\r\n                                        查看課程詳細資訊\r\n                                    </button>\r\n                                </div>\r\n                                )}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>}\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile;","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n// const basic_api = \"http://localhost:8080/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses(limit = 0) {\r\n        console.log(limit);\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search/${limit}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        console.log(\"ask for html from the server\");\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    enroll(studentId, course, orderDetail, classAmounts) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, course, orderDetail, classAmounts },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    // getMyOrders(studentId) {\r\n    //     let token;\r\n    //     localStorage.getItem(\"user_data\")\r\n    //     ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n    //     : token = \"\";\r\n    //     return axios.get(\r\n    //         `${basic_api}/getMyOrders/${studentId}`,\r\n    //         { headers: { Authorization: token } }\r\n    //     );\r\n    // }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","filterCategory","setFilterCategory","setCurrentSearch","Navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","_useState3","_useState4","myCourses","setMyCourses","handleSearch","e","result","target","id","filter","i","_id","closest","localStorage","setItem","JSON","stringify","targetCategories","category","split","newArr","map","j","length","includes","console","log","push","useEffect","data","orders","newCourseService","searchAllCourses","then","d","_d$data","newData","profile","instructorPhoto","catch","setTimeout","_jsx","className","children","_jsxs","courseTitle","instructor","date","address","plan","type","courseId","onClick","basic_api","courseService","_classCallCheck","_createClass","key","value","token","limit","arguments","undefined","getItem","parse","axios","get","concat","headers","Authorization","ItemName","TotalAmount","studentId","course","orderDetail","classAmounts","post"],"sourceRoot":""}