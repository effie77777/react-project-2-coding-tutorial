{"version":3,"file":"static/js/486.ef4e4a47.chunk.js","mappings":"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","sources":["assets/images/icon_fb.svg","assets/images/icon_google.svg","pages/Login.js"],"sourcesContent":["var _g;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgIconFb(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 512,\n    viewBox: \"0 0 176 176\",\n    width: 512,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Layer_2\",\n    \"data-name\": \"Layer 2\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"_01.facebook\",\n    \"data-name\": \"01.facebook\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"background\",\n    cx: 88,\n    cy: 88,\n    fill: \"#3a559f\",\n    r: 88\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    id: \"icon\",\n    d: \"m115.88 77.58-1.77 15.33a2.87 2.87 0 0 1 -2.82 2.57h-16l-.08 45.45a2.05 2.05 0 0 1 -2 2.07h-16.21a2 2 0 0 1 -2-2.08v-45.44h-12a2.87 2.87 0 0 1 -2.84-2.9l-.06-15.33a2.88 2.88 0 0 1 2.84-2.92h12.06v-14.8c0-17.18 10.2-26.53 25.16-26.53h12.26a2.88 2.88 0 0 1 2.85 2.92v12.9a2.88 2.88 0 0 1 -2.85 2.92h-7.52c-8.13 0-9.71 4-9.71 9.78v12.81h17.87a2.88 2.88 0 0 1 2.82 3.25z\",\n    fill: \"#fff\"\n  })))));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconFb);\nexport default __webpack_public_path__ + \"static/media/icon_fb.2e02184f0e9670d6a01f25ca0d4b4d3b.svg\";\nexport { ForwardRef as ReactComponent };","var _g, _g2, _g3, _g4, _g5, _g6, _g7, _g8, _g9, _g10, _g11, _g12, _g13, _g14, _g15;\nvar _excluded = [\"title\", \"titleId\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport * as React from \"react\";\nfunction SvgIconGoogle(_ref, svgRef) {\n  var title = _ref.title,\n    titleId = _ref.titleId,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    viewBox: \"0 0 512 512\",\n    style: {\n      enableBackground: \"new 0 0 512 512\"\n    },\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#FBBB00\"\n    },\n    d: \"M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256 c0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456 C103.821,274.792,107.225,292.797,113.47,309.408z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#518EF8\"\n    },\n    d: \"M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451 c-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535 c29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#28B446\"\n    },\n    d: \"M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512 c-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771 c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      fill: \"#F14336\"\n    },\n    d: \"M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012 c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0 C318.115,0,375.068,22.126,419.404,58.936z\"\n  }), _g || (_g = /*#__PURE__*/React.createElement(\"g\", null)), _g2 || (_g2 = /*#__PURE__*/React.createElement(\"g\", null)), _g3 || (_g3 = /*#__PURE__*/React.createElement(\"g\", null)), _g4 || (_g4 = /*#__PURE__*/React.createElement(\"g\", null)), _g5 || (_g5 = /*#__PURE__*/React.createElement(\"g\", null)), _g6 || (_g6 = /*#__PURE__*/React.createElement(\"g\", null)), _g7 || (_g7 = /*#__PURE__*/React.createElement(\"g\", null)), _g8 || (_g8 = /*#__PURE__*/React.createElement(\"g\", null)), _g9 || (_g9 = /*#__PURE__*/React.createElement(\"g\", null)), _g10 || (_g10 = /*#__PURE__*/React.createElement(\"g\", null)), _g11 || (_g11 = /*#__PURE__*/React.createElement(\"g\", null)), _g12 || (_g12 = /*#__PURE__*/React.createElement(\"g\", null)), _g13 || (_g13 = /*#__PURE__*/React.createElement(\"g\", null)), _g14 || (_g14 = /*#__PURE__*/React.createElement(\"g\", null)), _g15 || (_g15 = /*#__PURE__*/React.createElement(\"g\", null)));\n}\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgIconGoogle);\nexport default __webpack_public_path__ + \"static/media/icon_google.bbce75f8c7f6cd3d1c0db56d81258450.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { GoogleLogin, useGoogleLogin } from \"@react-oauth/google\";\r\nimport axios from \"axios\";\r\nimport newAuthService from \"../services/auth-service\";\r\nimport icon_fb from \"../assets/images/icon_fb.svg\";\r\nimport icon_google from \"../assets/images/icon_google.svg\";\r\n\r\nconst Login = ({ currentUser, setCurrentUser }) => {\r\n    const Navigate = useNavigate();\r\n    const [ email, setEmail ] = useState(\"\");\r\n    const [ password, setPassword ] = useState(\"\");\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    const [ successMsg, setSuccessMsg ] = useState(null);\r\n\r\n    const changeEmail = (e) => {\r\n        setEmail(e.target.value);\r\n    }\r\n    const changePassword = (e) => {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    const changePswVisibility = (e) => {\r\n        console.log(e.target);\r\n        let pwd = document.querySelector(\"#password\");\r\n        pwd.type === \"password\"\r\n        ? pwd.type = \"text\"\r\n        : pwd.type = \"password\";\r\n    }\r\n\r\n    const handleLogin = (e) => {\r\n        e.preventDefault();\r\n        let emailInputTag = document.querySelector(\"#email\");\r\n        // let passwordInputTag = document.querySelector(\"#password\");\r\n        console.log(emailInputTag.validity);\r\n        if (email.length === 0 || emailInputTag.validity.patternMismatch) {\r\n            return setErrorMsg(\"信箱格式錯誤\");\r\n        } else if (password.length < 8) {\r\n            return setErrorMsg(\"密碼至少需為 8 位數\");\r\n        }\r\n        newAuthService.login(email, password)\r\n        .then((d) => {\r\n            console.log(\"successful! \", d);\r\n            setErrorMsg(null);\r\n            setSuccessMsg(d.data.msg);\r\n            setTimeout(() => {\r\n                localStorage.setItem(\"user_data\", JSON.stringify(d.data));\r\n                let currentUser = newAuthService.getCurrentUser();\r\n                setCurrentUser(currentUser); //不涉及 db 所以回傳資料的形式不是 promise，不用 .then .catch      \r\n                setSuccessMsg(null);\r\n                Navigate(\"/profile\");\r\n                               \r\n                //(待檢驗)如果在 navigate 到 class 頁面前就先設定 currentUser，這樣在 login 頁面就有 currentUser 存在，就會跳出錯誤訊息\r\n            }, 2000);\r\n        })\r\n        .catch((e) => {\r\n            console.log(e);\r\n            setErrorMsg(e.response.data);\r\n        })\r\n    }\r\n\r\n    const handleLoginWithGoogle = useGoogleLogin({\r\n        //這邊只是讓使用者成功登入，還沒向 Google 拿使用者的資料。要到 useEffect(() => {}, [currentUser]) 那邊才會跟 Google 要資料\r\n        onSuccess: (codeResponse) => {\r\n            setCurrentUser(codeResponse);\r\n            console.log(\"codeResponse: \", codeResponse);\r\n            // localStorage.setItem(\"user_data\", {\"token\": JSON.stringify(codeResponse.access_token) });\r\n            // Navigate(\"/profile\");\r\n        },\r\n        onError: (error) => console.log(\"Login Failed: \", error)\r\n    });\r\n\r\n    // const handleLoginWithGoogle = GoogleLogin({\r\n    //     onSuccess: (credentialResponse) => {\r\n    //         newAuthService.loginWithGoogle(credentialResponse.credential)\r\n    //         .then((d) => {\r\n    //             localStorage.setItem(\"user_data\", JSON.stringify(d.data));\r\n    //             setCurrentUser(newAuthService.getCurrentUser());\r\n    //             setErrorMsg(null);\r\n    //             Navigate(\"/profile\");\r\n    //         })\r\n    //         .catch((e) => {\r\n    //             console.log(e);\r\n    //         })\r\n    //     },\r\n    //     onError: () => {\r\n    //         console.log('Login Failed');\r\n    //     }\r\n    // });\r\n\r\n    function getFbUser() {\r\n        window.FB.api(\"/me\", \"GET\", { fields: \"name,email\" }, (userInfo) => {\r\n            console.log(userInfo);\r\n        })   \r\n    }\r\n\r\n    const handleLoginWithFacebook = () => {\r\n        window.FB.login(\r\n            function(response) {\r\n                console.log(response);\r\n                setCurrentUser(response.authResponse.userID);\r\n                if (response.status === \"connected\") {\r\n                    getFbUser();         \r\n                }\r\n            },\r\n            { scope: \"public_profile,email,openid\" }\r\n        );\r\n    }\r\n\r\n\r\n    useEffect(() => {    \r\n        if (currentUser) {\r\n            setErrorMsg(\"您已經登入過囉 ! 將為您導向個人頁面\");\r\n            setTimeout(() => {\r\n                setErrorMsg(null);\r\n                Navigate(\"/profile\");\r\n            }, 2000);\r\n        } else {\r\n            window.fbAsyncInit = function() {\r\n                window.FB.init({\r\n                    appId: process.env.REACT_APP_FACEBOOK_LOGIN_APPID,\r\n                    cookie: true,\r\n                    xfbml: true,\r\n                    version: \"v18.0\",\r\n                });\r\n                console.log(\"after init\");\r\n                window.FB.AppEvents.logPageView();\r\n            };\r\n            (function(d, s, id) {\r\n                let js;\r\n                let fjs = d.getElementsByTagName(s)[0];\r\n                if (d.getElementById(id)) {\r\n                    return;\r\n                }\r\n                js = d.createElement(s);\r\n                js.id = id;\r\n                js.src = \"https://connect.facebook.net/en_US/sdk.js\";\r\n                fjs.parentNode.insertBefore(js, fjs);\r\n            }(document, \"script\", \"facebook-jssdk\"));\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (currentUser && currentUser.access_token) { //向 Google 拿使用者的資料\r\n            axios.get(\r\n                `https://www.googleapis.com/oauth2/v1/userinfo?access_token=${currentUser.access_token}`,\r\n                { headers: { Authorization: `Bearer ${currentUser.access_token}`, Accept: \"application/json\" } }\r\n            )\r\n            .then((res) => {\r\n                console.log(\"res: \", res);\r\n                // localStorage.setItem(\"user_data\", JSON.stringify(res.data));\r\n                // setProfile(res.data);\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })\r\n        }\r\n    }, [currentUser]);\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n\r\n            {errorMsg && (\r\n                <div className=\"error_msg\">{errorMsg}</div>\r\n            )}\r\n\r\n            {successMsg && (\r\n                <div className=\"success_msg\">{successMsg}</div>\r\n            )}\r\n\r\n            {!currentUser && (\r\n            <div>\r\n                <section className=\"my-11\">\r\n                    <form>\r\n                        <div className=\"mb-6\">\r\n                            <label htmlFor=\"email\" className=\"form-label\">信箱</label>\r\n                            <input type=\"email\" className=\"form-control p-3\" id=\"email\" name=\"email\" placeholder=\"example@gmail.com\" required max=\"60\" pattern=\".+@.+\\.+.{2,}\" onChange={changeEmail} />\r\n                        </div>\r\n                        <div className=\"mb-11\">\r\n                            <div className=\"position-relative\">\r\n                                <label htmlFor=\"password\" className=\"form-label\">密碼</label>\r\n                                <input type=\"password\" className=\"form-control py-3 ps-3\" id=\"password\" name=\"password\" required min=\"8\" onChange={changePassword} />\r\n                                <button type=\"button\" className=\"btn p-0 position-absolute end-0 ms-2 me-2 me-sm-4\" style={{top: \"46%\"}} >\r\n                                    <span class=\"material-symbols-outlined font-fill-1 p-2\" onClick={changePswVisibility} >\r\n                                        visibility\r\n                                    </span>\r\n                                </button>\r\n                            </div>\r\n                            <p className=\"mt-3\">8位數以上，至少一個大寫英文字母、一個數字、一個特殊符號(僅限<span className=\"text-warning\">!@#%&=_?</span>)且<span className=\"text-warning\">不可有空格</span></p>\r\n                        </div>\r\n                        <button type=\"submit\" className=\"btn bg-linear text-white px-6 w-100 w-sm-40 w-md-30 w-lg-25 border-0\" style={{ paddingTop: \"0.625rem\", paddingBottom: \"0.625rem\" }} onClick={handleLogin}>登入</button>\r\n                    </form>\r\n                </section>\r\n                <section>\r\n                    <div className=\"border-top position-relative d-flex justify-content-center\">\r\n                        <p className=\"position-absolute px-5 bg-fourth\" style={{transform: \"translateY(-50%)\"}}>其它登入方式</p>\r\n                    </div>\r\n                    <div className=\"d-flex mt-12 flex-wrap\">\r\n                        <button type=\"button\" className=\"btn border text-white py-3 w-100 w-sm-40 w-md-30 w-lg-25 me-sm-5 mb-4 mb-sm-0\" onClick={handleLoginWithFacebook}>\r\n                            <img src={icon_fb} alt=\"Facebook icon\" className=\"w-6 h-6 me-4\" style={{marginTop: \"-0.25rem\"}} />\r\n                            Facebook 登入\r\n                        </button>\r\n                        <button type=\"button\" className=\"btn border text-white py-3 w-100 w-sm-40 w-md-30 w-lg-25\" onClick={() => handleLoginWithGoogle()}>\r\n                            <img src={icon_google} alt=\"Google icon\" className=\"w-5 h-5 me-4\" style={{marginTop: \"-0.125rem\"}} />\r\n                            Google 登入\r\n                        </button>\r\n                        <GoogleLogin\r\n                            onSuccess={credentialResponse => {\r\n                                console.log(credentialResponse);\r\n                                newAuthService.loginWithGoogle(credentialResponse.credential)\r\n                                .then((d) => {\r\n                                    console.log(d);\r\n                                    localStorage.setItem(\"user_data\", JSON.stringify(d.data));\r\n                                    setCurrentUser(newAuthService.getCurrentUser());\r\n                                    setErrorMsg(null);\r\n                                    Navigate(\"/profile\");\r\n                                })\r\n                                .catch((e) => {\r\n                                    console.log(e);\r\n                                })\r\n                            }}\r\n                            onError={() => {\r\n                                console.log('Login Failed');\r\n                            }}\r\n                        ></GoogleLogin>\r\n                    </div>\r\n                </section>\r\n            </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;"],"names":["_ref","currentUser","setCurrentUser","Navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","errorMsg","setErrorMsg","_useState7","_useState8","successMsg","setSuccessMsg","handleLoginWithGoogle","useGoogleLogin","onSuccess","codeResponse","console","log","onError","error","useEffect","setTimeout","window","fbAsyncInit","FB","init","appId","process","cookie","xfbml","version","AppEvents","logPageView","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","access_token","axios","get","concat","headers","Authorization","Accept","then","res","catch","e","_jsxs","className","children","_jsx","htmlFor","type","name","placeholder","required","max","pattern","onChange","target","value","min","style","top","class","onClick","pwd","querySelector","paddingTop","paddingBottom","preventDefault","emailInputTag","validity","length","patternMismatch","newAuthService","login","data","msg","localStorage","setItem","JSON","stringify","getCurrentUser","response","transform","authResponse","userID","status","api","fields","userInfo","scope","icon_fb","alt","marginTop","icon_google","GoogleLogin","credentialResponse","loginWithGoogle","credential"],"sourceRoot":""}