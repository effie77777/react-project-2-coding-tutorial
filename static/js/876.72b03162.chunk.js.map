{"version":3,"file":"static/js/876.72b03162.chunk.js","mappings":"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","sources":["pages/Profile.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Profile = ({ currentUser, allCourses, setAllCourses, filterCategory, setFilterCategory, setCurrentSearch }) => {\r\n    const Navigate = useNavigate();\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    const [ myCourses, setMyCourses ] = useState([]);\r\n\r\n    const handleSearch = (e) => {\r\n        let result;\r\n        if (e.target.id) { //使用者點到的剛好是 button 那個標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.id);\r\n        } else { //使用者點到 button 標籤底下的任何一個子標籤\r\n            result = filterCategory.filter((i) => i._id === e.target.closest(\"button\").id);\r\n        }\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        let targetCategories = result[0].category.split(\"、\");\r\n        let newArr = [];\r\n        filterCategory.map((i) => {\r\n            for (let j = 0; j < targetCategories.length; j ++) {\r\n                if (i.category.includes(targetCategories[j])) {\r\n                    console.log(targetCategories[j]);\r\n                    newArr.push(i);\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        setFilterCategory(newArr);\r\n        Navigate(\"/detail\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (allCourses.length > 0) {\r\n            setMyCourses(allCourses.filter((i) => i.students.includes(currentUser.data._id)));\r\n            setFilterCategory(allCourses);\r\n        }\r\n    }, [allCourses]);\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n            setTimeout(() => {\r\n                Navigate(\"/login\");\r\n            }, 2000);\r\n        } else {\r\n            newCourseService.searchAllCourses()\r\n            .then((d) => {\r\n                let { newData, profile } = d.data;\r\n                for (let i = 0; i < newData.length; i ++) {\r\n                    newData[i].instructorPhoto = profile[i];\r\n                }\r\n                setAllCourses(newData); // newData 是一整個 array，裡面包含很多個 object，每一個 object 都代表一個課程\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n\r\n            {!currentUser\r\n            ? <div className=\"error_msg\">{errorMsg}</div>\r\n            : <div>\r\n                <section className=\"py-11\">\r\n                    <div className=\"row\">\r\n                        <div className=\"col-12\">\r\n                            <h2 className=\"col-10 offset-1 fw-bold text-white fs-5 mb-10\">我的課程</h2>\r\n                            <div className=\"col-10 offset-1 d-flex flex-wrap flex-md-nowrap overflow-md-auto\">\r\n\r\n                                {myCourses.length > 0 && myCourses.map((i) =>\r\n                                <button type=\"button\" className=\"class-card btn\" id={i._id} onClick={handleSearch} key={i._id}>\r\n                                    <div className=\"class-card-header\">                                \r\n                                        <img src={i.instructorPhoto} alt=\"the instructor\" className=\"profile_img mb-2\" />\r\n                                        <p>{i.instructor.name}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-body text-start\">\r\n                                        <h3 className=\"fw-bold fs-3 text-white\">{i.title}</h3>                       \r\n                                        <div className=\"\">\r\n                                            {i.category.split(\"、\").map((i) =>\r\n                                            <p className=\"text-primary border border-primary d-inline-block p-1 rounded-0 me-1\" style={{fontSize: \"0.9rem\"}}>{i}</p>\r\n                                            )}\r\n                                        </div>\r\n                                        <p className=\"h-60 h-sm-50 h-md-60 mb-2\">{i.description}</p>\r\n                                    </div>\r\n                                    <div className=\"class-card-footer\">\r\n                                        <p className=\"align-self-end mb-1\">{i.plan.slice(i.plan.indexOf(\"堂\") + 1, i.plan.indexOf(\"/\"))}</p>\r\n                                        <p className=\"fs-4 text-white\">{i.plan.slice(0, i.plan.indexOf(\" \"))}</p>\r\n                                    </div>\r\n                                </button>\r\n                                )}\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n            </div>}\r\n        \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile;","import axios from \"axios\";\r\n// const basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\nconst basic_api = \"http://localhost:8080/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses(limit = 0) {\r\n        console.log(limit);\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search/${limit}`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        console.log(\"ask for html from the server\");\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n    }\r\n\r\n    enroll(studentId, courseId) {\r\n        let token;\r\n        localStorage.getItem(\"user_data\")\r\n        ? token = JSON.parse(localStorage.getItem(\"user_data\")).token\r\n        : token = \"\";\r\n        return axios.post(\r\n            `${basic_api}/enroll`,\r\n            { studentId, courseId },\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","filterCategory","setFilterCategory","setCurrentSearch","Navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","errorMsg","setErrorMsg","_useState3","_useState4","myCourses","setMyCourses","handleSearch","e","result","target","id","filter","i","_id","closest","localStorage","setItem","JSON","stringify","targetCategories","category","split","newArr","map","j","length","includes","console","log","push","useEffect","students","data","newCourseService","searchAllCourses","then","d","_d$data","newData","profile","instructorPhoto","catch","setTimeout","_jsx","className","children","_jsxs","type","onClick","src","alt","instructor","name","title","style","fontSize","description","plan","slice","indexOf","basic_api","courseService","_classCallCheck","_createClass","key","value","token","limit","arguments","undefined","getItem","parse","axios","get","concat","headers","Authorization","ItemName","TotalAmount","studentId","courseId","post"],"sourceRoot":""}