"use strict";(self.webpackChunkcode_tutorial=self.webpackChunkcode_tutorial||[]).push([[876],{3876:function(e,t,a){a.r(t);var r=a(9439),s=a(2791),c=a(7689),n=a(4313),o=a(184);t.default=function(e){var t=e.currentUser,a=e.allCourses,l=e.setAllCourses,i=e.filterCategory,u=e.setFilterCategory,d=e.setCurrentSearch,h=(0,c.s0)(),f=(0,s.useState)(null),m=(0,r.Z)(f,2),g=m[0],p=m[1],x=(0,s.useState)([]),v=(0,r.Z)(x,2),N=v[0],k=v[1],S=function(e){var t=i.filter((function(t){return t._id===e.target.id}));d(t),localStorage.setItem("current_search",JSON.stringify(t));var a=t[0].category.split("\u3001"),r=[];i.map((function(e){for(var t=0;t<a.length;t++)if(e.category.includes(a[t])){console.log(a[t]),r.push(e);break}})),u(r),h("/detail")};return(0,s.useEffect)((function(){a.length>0&&u(a)}),[a]),(0,s.useEffect)((function(){t?(n.Z.searchAllCourses("unlimited").then((function(e){for(var t=e.data,a=t.newData,r=t.profile,s=0;s<a.length;s++)a[s].instructorPhoto=r[s];l(a)})).catch((function(e){console.log(e)})),n.Z.getMyOrders(t.data._id).then((function(e){k(e.data)})).catch((function(e){console.log(e)}))):(p("\u8acb\u5148\u767b\u5165\u6216\u8a3b\u518a"),setTimeout((function(){h("/login")}),2e3))}),[]),(0,o.jsx)("div",{className:"container-fluid",children:t?(0,o.jsx)("div",{children:(0,o.jsx)("section",{className:"py-11",children:(0,o.jsx)("div",{className:"row",children:(0,o.jsxs)("div",{className:"col-12",children:[(0,o.jsx)("h3",{className:"col-10 offset-1 fw-bold text-white fs-5 mb-10",children:"\u6211\u7684\u8ab2\u7a0b"}),(0,o.jsx)("div",{className:"col-10 offset-1",children:N.length>0&&N.map((function(e){return(0,o.jsxs)("div",{className:"d-flex flex-column flex-md-row py-4 px-6 border mb-6",children:[(0,o.jsxs)("div",{className:"d-flex flex-column flex-lg-row flex-grow-1 profile-card-div",children:[(0,o.jsxs)("div",{className:"w-lg-50",children:[(0,o.jsxs)("p",{className:"mb-3",children:[e.courseTitle," (",e.instructor,")"]}),(0,o.jsxs)("p",{className:"mb-3 mb-lg-0",children:["\u8ab2\u7a0b\u65b9\u6848: \u5171 ",e.plan," \u5802"]})]}),(0,o.jsxs)("div",{className:"w-lg-50",children:[(0,o.jsxs)("p",{className:"mb-3",children:["\u4e0a\u8ab2\u65e5\u671f: ",e.date]}),(0,o.jsxs)("p",{className:"pb-4 pb-md-0 profile-card-p",children:["\u4e0a\u8ab2\u5730\u9ede: ",e.address]})]})]}),(0,o.jsx)("button",{type:"button",className:"btn rounded-0 text-start text-md-center mt-4 mt-md-0 flex-shrink-0 profile-card-btn",id:e.courseId,onClick:S,children:"\u67e5\u770b\u8ab2\u7a0b\u8a73\u7d30\u8cc7\u8a0a"})]},e.courseId)}))})]})})})}):(0,o.jsx)("div",{className:"error_msg",children:g})})}},4313:function(e,t,a){var r=a(5671),s=a(3144),c=a(1243),n="https://react-project-2-coding-tutorial-backend.onrender.com/api/course",o=new(function(){function e(){(0,r.Z)(this,e)}return(0,s.Z)(e,[{key:"searchAllCourses",value:function(){var e;return e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.get("".concat(n,"/search"),{headers:{Authorization:e}})}},{key:"checkOut",value:function(e,t){var a;return a=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.get("".concat(n,"/payment/").concat(e,"/").concat(t),{headers:{Authorization:a}})}},{key:"enroll",value:function(e,t,a,r){var s;return s=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.post("".concat(n,"/enroll"),{studentId:e,course:t,orderDetail:a,classAmounts:r},{headers:{Authorization:s}})}},{key:"getMyOrders",value:function(e){var t;return t=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.get("".concat(n,"/getMyOrders/").concat(e),{headers:{Authorization:t}})}},{key:"checkIfPaymentFinished",value:function(e,t,a,r,s){var o;return o=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")).token:"",c.Z.post("".concat(n,"/checkIfPaymentFinished"),{hashed_result:e,studentId:t,course:a,orderDetail:r,classAmounts:s},{headers:{Authorization:o}})}}]),e}());t.Z=o}}]);
//# sourceMappingURL=876.95525474.chunk.js.map