{"version":3,"file":"static/js/892.2384328f.chunk.js","mappings":"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","sources":["pages/Detail.js","services/course-service.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport instructor from \"../assets/images/instructor.jpg\";\r\nimport newCourseService from \"../services/course-service\";\r\n\r\nconst Detail = ({ currentUser, allCourses, setAllCourses, currentSearch, setCurrentSearch, purchase, setPurchase }) => {\r\n    const [ similarCourses, setSimilarCourses ] = useState([]);\r\n    const [ errorMsg, setErrorMsg ] = useState(null);\r\n    const Navigate = useNavigate();\r\n\r\n    const handleSearch = (e) => {\r\n        let targetClass;\r\n        if (e.target.id) {\r\n            targetClass = e.target;\r\n        } else {\r\n            targetClass = e.target.closest(\"button\");\r\n        }\r\n        let result = allCourses.filter((i) => i._id === targetClass.id);\r\n        setCurrentSearch(result);\r\n        localStorage.setItem(\"current_search\", JSON.stringify(result));\r\n        window.scrollTo({\r\n            top: \"0\",\r\n            behavior: \"smooth\",\r\n        });\r\n    }\r\n\r\n    const handleSelectPlan = (e) => {\r\n        console.log(e.target);\r\n        let targetId = e.target.id;\r\n        if (!targetId) {\r\n            targetId = e.target.closest(\"button\").id;\r\n        }\r\n        let amounts = targetId.substring(targetId.indexOf(\" \") + 1, targetId.indexOf(\"堂\"));\r\n        let pricePerClass = targetId.substring(targetId.indexOf(\"$\") + 1, targetId.indexOf(\" \"));\r\n        localStorage.setItem(\"purchase\", JSON.stringify([pricePerClass, amounts]));\r\n        setPurchase([pricePerClass, amounts]);\r\n        Navigate(\"/placeOrder\");\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!currentUser) {\r\n            setErrorMsg(\"請先登入或註冊\");\r\n        } else {\r\n            setErrorMsg(null);\r\n            newCourseService.searchAllCourses()\r\n            .then((d) => {\r\n                let { newData, profile } = d.data;\r\n                for (let i = 0; i < newData.length; i ++) {\r\n                    newData[i].instructorPhoto = profile[i];\r\n                }\r\n                setAllCourses(newData);\r\n                let foundData = JSON.parse(localStorage.getItem(\"current_search\"));\r\n                setCurrentSearch(foundData);                \r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n            })\r\n        }\r\n    }, []);\r\n\r\n    //下面這段程式碼不寫在 useEffect(() => {}, []) 裡面，是因為即使頁面不是第一次 loading，但每當使用者點選任何一張卡片(重設 currentSearch )的時候都要執行\r\n    useEffect(() => {\r\n        let sortingResult = sortAllCourses(allCourses, currentSearch);\r\n        setSimilarCourses(sortingResult);\r\n    }, [currentSearch]);\r\n\r\n    function sortAllCourses(allCourses, currentSearch) {\r\n        //將所有課程重新排列，將每一門課程 category 和當前搜尋課程的 category 做比較。和當前搜尋的課程完全吻合的放在最前面，剩下的則依照吻合程度排列\r\n        let sortingResult = []; \r\n        allCourses.map((i) => {\r\n            if (currentSearch[0] && i._id !== currentSearch[0]._id) {\r\n                if (i.category === currentSearch[0].category) {\r\n                    sortingResult.unshift({ \"completelyMatch\": true, i }); //完全吻合的放在 sortingResult 的最前面\r\n                } else {\r\n                    let matchCount = 0;\r\n                    for (let j = 0; j < currentSearch[0].category.split(\"、\").length; j ++) {\r\n                        if (i.category.includes(currentSearch[0].category.split(\"、\")[j])) {\r\n                            matchCount += 1;\r\n                        }\r\n                    }\r\n                    if (matchCount > 0) {\r\n                        sortingResult.push({ matchCount, i });\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        sortingResult.sort(function(a, b) {\r\n            if (!a.completelyMatch && !b.completelyMatch) {\r\n                //篩選出所有符合條件的課程後，只針對「category 並非完全吻合」的項目，依照其 matchCount 的數量進行排序。也就是「category 完全吻合」的項目不會納入排序，所以一開始裝進 sortingResult 的時候要用 unshift 而非 push\r\n                return b.matchCount - a.matchCount;\r\n            }\r\n        }) \r\n        \r\n        //     // sortingResult = sortingResult.map((item) => {\r\n        //     //     for (let prop in item) {\r\n        //     //         if (prop !== \"i\") {\r\n        //     //             delete item[prop];\r\n        //     //         }\r\n        //     //         return item;\r\n        //     //     }\r\n        //     // })\r\n\r\n        sortingResult = sortingResult.map((item) => item.i); //我們真正需要的資料只有「課程內容本身」而已，也就是 i 這個 property 對應到的 value\r\n        return sortingResult;\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            {errorMsg && (\r\n            <div className=\"error_msg\">{errorMsg}</div>\r\n            )}\r\n\r\n            {!errorMsg && currentSearch.length > 0 && (\r\n            <div>\r\n                <div className=\"container-fluid\">\r\n                    <section className=\"section\">\r\n                        <div className=\"row\">\r\n                            <div className=\"col-12 d-flex flex-wrap\">\r\n                                <div className=\"col-12 col-md-7\">\r\n                                    <div className=\"card p-12 d-flex flex-column flex-md-row justify-content-between bg-third bg-opacity-10 rounded-24\">\r\n                                        <div className=\"w-md-35 w-lg-30 d-flex flex-column justify-content-center\">\r\n                                            <img src={currentSearch[0].instructorPhoto} alt=\"the instructor\" className=\"mb-2 profile_img\" />\r\n                                            <p className=\"detail-card-instructor-name\">{currentSearch[0].instructor.name}</p>\r\n                                        </div>\r\n                                        <div className=\"w-md-65 w-lg-70 d-flex flex-column\">\r\n                                            <h3 class=\"card-title fw-bold fs-4 text-white mb-1\">{currentSearch[0].title}</h3>\r\n                                            <p className=\"text-primary mb-3\">{currentSearch[0].category}</p>\r\n                                            <p>{currentSearch[0].description}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <h3 className=\"title mt-15 mb-3 ms-6\">講師介紹</h3>\r\n                                    <div className=\"card p-12 d-flex flex-column align-items-between bg-opacity-10 bg-third rounded-24\">\r\n                                        <div className=\"mb-sm-4 d-flex flex-wrap justify-content-between\">\r\n                                            <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-60\">\r\n                                                <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                    school\r\n                                                </span>\r\n                                                <p><span className=\"text-white\">學歷</span> {currentSearch[0].instructor.education}</p>\r\n                                            </div>\r\n                                            <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-37\">\r\n                                                <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                    translate\r\n                                                </span>\r\n                                                <p><span className=\"text-white\">語言</span> {currentSearch[0].instructor.language}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"d-flex flex-wrap justify-content-between\">\r\n                                            <div className=\"d-flex w-100 mb-4 mb-sm-0 w-sm-60\">\r\n                                                <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                    work\r\n                                                </span>\r\n                                                <p><span className=\"text-white\">經歷</span> {currentSearch[0].instructor.workingExp}</p>\r\n                                            </div>\r\n                                            <div className=\"d-flex w-100 w-sm-37\">\r\n                                                <span class=\"material-symbols-outlined me-2 text-primary fs-3 font-fill-1\">\r\n                                                    workspace_premium\r\n                                                </span>\r\n                                                <p><span className=\"text-white\">等級</span> {currentSearch[0].instructor.languageLevel}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"w-100 h-1 border-bottom my-9\"></div>\r\n                                        <div>\r\n                                            <p className=\"mb-4\">{currentSearch[0].instructor.simpleBio.substring(2, currentSearch[0].instructor.simpleBio.indexOf(\"2\"))}</p>\r\n                                            <p>{currentSearch[0].instructor.simpleBio.substring(currentSearch[0].instructor.simpleBio.indexOf(\"2.\") + 2)}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <h3 className=\"title mt-15 mb-3 ms-6\">課程簡介</h3>\r\n                                    <div className=\"card p-12 d-flex flex-column align-items-between bg-opacity-10 bg-third text-white rounded-24\">\r\n                                        <div className=\"mb-9\">\r\n                                            <h4 className=\"border-start border-primary border-3 px-2 fs-3 mb-4\">這堂課你將會學到</h4>\r\n                                            <ul>\r\n                                                {currentSearch[0].expectToObtain.split(\" \").map((i) =>\r\n                                                <li className=\"d-flex\">\r\n                                                    <span class=\"material-symbols-outlined detail-square\" style={{marginTop: \"0.375rem\"}}>\r\n                                                        square\r\n                                                    </span>\r\n                                                    <p>{i.substring(2)}</p>\r\n                                                </li>\r\n                                                )}\r\n                                            </ul>\r\n                                        </div>\r\n                                        <div>\r\n                                        <h4 className=\"border-start border-primary border-3 px-2 fs-3 mb-4\">為什麼這堂課重要？</h4>\r\n                                            <ul>\r\n                                                {currentSearch[0].importance.split(\" \").map((i) =>\r\n                                                <li className=\"d-flex\">\r\n                                                    <span class=\"material-symbols-outlined detail-square\" style={{marginTop: \"0.375rem\"}}>\r\n                                                        square\r\n                                                    </span>\r\n                                                    <p>{i.substring(2)}</p>\r\n                                                </li>\r\n                                                )}\r\n                                            </ul>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"col-12 col-md-4 offset-md-1 d-flex flex-column position-md-fixed mt-15 mt-md-0\" style={{top: \"10.75rem\", right: \"3.5%\"}}>\r\n                                    <div className=\"d-flex flex-column flex-lg-row mb-3\">\r\n                                        <h3 className=\"title ms-6\">方案選擇</h3>\r\n                                        <small className=\"ms-5 text-warning align-self-lg-end mb-lg-1\">(以下價格均為單堂費用)</small>\r\n                                    </div>\r\n                                    <ul className=\"w-100 py-8 px-6 bg-opacity-10 bg-third h-fit-content rounded-24 detail-ul\" style={{width: \"85%\"}}>\r\n                                        {currentSearch[0].plan.split((\"/\")).map((i, index) =>\r\n                                        <li className=\"detail-li\" key={index}>\r\n                                            <button type=\"button\" className=\"btn\" id={i} onClick={handleSelectPlan}>\r\n                                                <p>{i.substring(0, i.indexOf(\" \"))}</p>\r\n                                                <p>{i.substring(i.indexOf(\" \") + 1)}</p>\r\n                                            </button>\r\n                                        </li>\r\n                                        )}                                    \r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n\r\n                <div className=\"bg-fourth position-relative z-1\">\r\n                    <div className=\"container-fluid\">\r\n                        <section className=\"d-flex flex-column align-items-center py-15 py-md-22\">\r\n                            <h3 className=\"title text-center\">其他人也看了這些課程</h3>\r\n                            <div className=\"title-vr mb-6 mb-md-18\"></div>\r\n                            <div className=\"row w-100\">\r\n                                <div className=\"col-12 d-flex flex-wrap flex-md-nowrap overflow-md-auto\">\r\n                                    \r\n                                    {similarCourses.length > 0 && similarCourses.map((i) =>\r\n                                    <button type=\"button\" className=\"class-card btn\" id={i._id} onClick={handleSearch} key={i._id}>\r\n                                        <div className=\"class-card-header\">                                \r\n                                            <img src={i.instructorPhoto} alt=\"the instructor\" className=\"profile_img mb-2\" />\r\n                                            <p>{i.instructor.name}</p>\r\n                                        </div>\r\n                                        <div className=\"class-card-body text-start\">\r\n                                            <h3 className=\"fw-bold fs-3 text-white\">{i.title}</h3>                       \r\n                                            <div className=\"\">\r\n                                                {i.category.split(\"、\").map((i) =>\r\n                                                <p className=\"text-primary border border-primary d-inline-block p-1 rounded-0 me-1\" style={{fontSize: \"0.9rem\"}}>{i}</p>\r\n                                                )}\r\n                                            </div>\r\n                                            <p className=\"h-60 h-sm-50 h-md-60 mb-2\">{i.description}</p>\r\n                                        </div>\r\n                                        <div className=\"class-card-footer\">\r\n                                            <p className=\"align-self-end mb-1\">{i.plan.slice(i.plan.indexOf(\"分鐘\") - 2, i.plan.indexOf(\"/\"))}</p>\r\n                                            <p className=\"fs-4 text-white\">{i.plan.slice(0, i.plan.indexOf(\" \"))}</p>\r\n                                        </div>\r\n                                    </button>\r\n                                    )}\r\n\r\n                                </div>\r\n                            </div>\r\n                        </section>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            )}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Detail;\r\n","import axios from \"axios\";\r\nconst basic_api = \"https://react-project-2-coding-tutorial-backend.onrender.com/api/course\";\r\n\r\nclass courseService {\r\n    searchAllCourses() {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            let parsed = JSON.parse(localStorage.getItem(\"user_data\"));\r\n            // if (parsed.token) {\r\n                token = parsed.token;\r\n            // } else if (parsed.access_token) {\r\n            //     token = parsed.access_token;\r\n            // }\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/search`,\r\n            { headers: { Authorization: token } }\r\n        );\r\n    }\r\n\r\n    checkOut(ItemName, TotalAmount) {\r\n        let token;\r\n        if (localStorage.getItem(\"user_data\")) {\r\n            token = JSON.parse(localStorage.getItem(\"user_data\")).token;\r\n        } else {\r\n            token = \"\";\r\n        }\r\n        return axios.get(\r\n            `${basic_api}/payment/${ItemName}/${TotalAmount}`,\r\n            { headers: { Authorization: token } }\r\n        )\r\n        // .then((d) => {\r\n        //     console.log(\"inside checkOut service. d is: \", d);\r\n        //     return d;\r\n        // })\r\n        // .catch((e) => {\r\n        //     console.log(e);\r\n        // });\r\n    }\r\n}\r\n\r\nconst newCourseService = new courseService();\r\nexport default newCourseService;"],"names":["_ref","currentUser","allCourses","setAllCourses","currentSearch","setCurrentSearch","setPurchase","purchase","_useState","useState","_useState2","_slicedToArray","similarCourses","setSimilarCourses","_useState3","_useState4","errorMsg","setErrorMsg","Navigate","useNavigate","handleSearch","e","targetClass","target","id","closest","result","filter","i","_id","localStorage","setItem","JSON","stringify","window","scrollTo","top","behavior","handleSelectPlan","console","log","targetId","amounts","substring","indexOf","pricePerClass","useEffect","newCourseService","searchAllCourses","then","d","_d$data","data","newData","profile","length","instructorPhoto","foundData","parse","getItem","catch","sortingResult","map","category","unshift","matchCount","j","split","includes","push","sort","a","b","completelyMatch","item","sortAllCourses","_jsxs","children","_jsx","className","src","alt","instructor","name","class","title","description","education","language","workingExp","languageLevel","simpleBio","expectToObtain","style","marginTop","importance","right","width","plan","index","type","onClick","fontSize","slice","basic_api","courseService","_classCallCheck","_createClass","key","value","token","axios","get","concat","headers","Authorization","ItemName","TotalAmount"],"sourceRoot":""}